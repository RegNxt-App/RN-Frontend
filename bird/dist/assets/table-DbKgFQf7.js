import{r as N,g as bl,d as Nl}from"./react-C4uqvx61.js";import{j as b}from"./ui-y7Uu7tY6.js";var Fr={exports:{}},Vr={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var je=N;function Pl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Al=typeof Object.is=="function"?Object.is:Pl,Fl=je.useState,Vl=je.useEffect,kl=je.useLayoutEffect,Dl=je.useDebugValue;function Hl(e,t){var n=t(),o=Fl({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return kl(function(){r.value=n,r.getSnapshot=t,_n(r)&&i({inst:r})},[e,n,t]),Vl(function(){return _n(r)&&i({inst:r}),e(function(){_n(r)&&i({inst:r})})},[e]),Dl(n),n}function _n(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Al(e,n)}catch{return!0}}function zl(e,t){return t()}var Tl=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zl:Hl;Vr.useSyncExternalStore=je.useSyncExternalStore!==void 0?je.useSyncExternalStore:Tl;Fr.exports=Vr;var Ll=Fr.exports;/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Pe(e,t){return typeof e=="function"?e(t):e}function ae(e,t){return n=>{t.setState(o=>({...o,[e]:Pe(n,o[e])}))}}function Jt(e){return e instanceof Function}function Bl(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function Ol(e,t){const n=[],o=r=>{r.forEach(i=>{n.push(i);const s=t(i);s!=null&&s.length&&o(s)})};return o(e),n}function W(e,t,n){let o=[],r;return i=>{let s;n.key&&n.debug&&(s=Date.now());const l=e(i);if(!(l.length!==o.length||l.some((d,f)=>o[f]!==d)))return r;o=l;let a;if(n.key&&n.debug&&(a=Date.now()),r=t(...l),n==null||n.onChange==null||n.onChange(r),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-s)*100)/100,f=Math.round((Date.now()-a)*100)/100,c=f/16,g=(h,p)=>{for(h=String(h);h.length<p;)h=" "+h;return h};console.info(`%câ± ${g(f,5)} /${g(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*c,120))}deg 100% 31%);`,n==null?void 0:n.key)}return r}}function U(e,t,n,o){return{debug:()=>{var r;return(r=e==null?void 0:e.debugAll)!=null?r:e[t]},key:!1,onChange:o}}function Gl(e,t,n,o){const r=()=>{var s;return(s=i.getValue())!=null?s:e.options.renderFallbackValue},i={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(o),renderValue:r,getContext:W(()=>[e,n,t,i],(s,l,u,a)=>({table:s,column:l,row:u,cell:a,getValue:a.getValue,renderValue:a.renderValue}),U(e.options,"debugCells"))};return e._features.forEach(s=>{s.createCell==null||s.createCell(i,n,t,e)},{}),i}function jl(e,t,n,o){var r,i;const l={...e._getDefaultColumnDef(),...t},u=l.accessorKey;let a=(r=(i=l.id)!=null?i:u?typeof String.prototype.replaceAll=="function"?u.replaceAll(".","_"):u.replace(/\./g,"_"):void 0)!=null?r:typeof l.header=="string"?l.header:void 0,d;if(l.accessorFn?d=l.accessorFn:u&&(u.includes(".")?d=c=>{let g=c;for(const p of u.split(".")){var h;g=(h=g)==null?void 0:h[p]}return g}:d=c=>c[l.accessorKey]),!a)throw new Error;let f={id:`${String(a)}`,accessorFn:d,parent:o,depth:n,columnDef:l,columns:[],getFlatColumns:W(()=>[!0],()=>{var c;return[f,...(c=f.columns)==null?void 0:c.flatMap(g=>g.getFlatColumns())]},U(e.options,"debugColumns")),getLeafColumns:W(()=>[e._getOrderColumnsFn()],c=>{var g;if((g=f.columns)!=null&&g.length){let h=f.columns.flatMap(p=>p.getLeafColumns());return c(h)}return[f]},U(e.options,"debugColumns"))};for(const c of e._features)c.createColumn==null||c.createColumn(f,e);return f}const se="debugHeaders";function Po(e,t,n){var o;let i={id:(o=n.id)!=null?o:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],l=u=>{u.subHeaders&&u.subHeaders.length&&u.subHeaders.map(l),s.push(u)};return l(i),s},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach(s=>{s.createHeader==null||s.createHeader(i,e)}),i}const Xl={createTable:e=>{e.getHeaderGroups=W(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o,r)=>{var i,s;const l=(i=o==null?void 0:o.map(f=>n.find(c=>c.id===f)).filter(Boolean))!=null?i:[],u=(s=r==null?void 0:r.map(f=>n.find(c=>c.id===f)).filter(Boolean))!=null?s:[],a=n.filter(f=>!(o!=null&&o.includes(f.id))&&!(r!=null&&r.includes(f.id)));return Mt(t,[...l,...a,...u],e)},U(e.options,se)),e.getCenterHeaderGroups=W(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o,r)=>(n=n.filter(i=>!(o!=null&&o.includes(i.id))&&!(r!=null&&r.includes(i.id))),Mt(t,n,e,"center")),U(e.options,se)),e.getLeftHeaderGroups=W(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,o)=>{var r;const i=(r=o==null?void 0:o.map(s=>n.find(l=>l.id===s)).filter(Boolean))!=null?r:[];return Mt(t,i,e,"left")},U(e.options,se)),e.getRightHeaderGroups=W(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,o)=>{var r;const i=(r=o==null?void 0:o.map(s=>n.find(l=>l.id===s)).filter(Boolean))!=null?r:[];return Mt(t,i,e,"right")},U(e.options,se)),e.getFooterGroups=W(()=>[e.getHeaderGroups()],t=>[...t].reverse(),U(e.options,se)),e.getLeftFooterGroups=W(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),U(e.options,se)),e.getCenterFooterGroups=W(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),U(e.options,se)),e.getRightFooterGroups=W(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),U(e.options,se)),e.getFlatHeaders=W(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),U(e.options,se)),e.getLeftFlatHeaders=W(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),U(e.options,se)),e.getCenterFlatHeaders=W(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),U(e.options,se)),e.getRightFlatHeaders=W(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),U(e.options,se)),e.getCenterLeafHeaders=W(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var o;return!((o=n.subHeaders)!=null&&o.length)}),U(e.options,se)),e.getLeftLeafHeaders=W(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var o;return!((o=n.subHeaders)!=null&&o.length)}),U(e.options,se)),e.getRightLeafHeaders=W(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var o;return!((o=n.subHeaders)!=null&&o.length)}),U(e.options,se)),e.getLeafHeaders=W(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,o)=>{var r,i,s,l,u,a;return[...(r=(i=t[0])==null?void 0:i.headers)!=null?r:[],...(s=(l=n[0])==null?void 0:l.headers)!=null?s:[],...(u=(a=o[0])==null?void 0:a.headers)!=null?u:[]].map(d=>d.getLeafHeaders()).flat()},U(e.options,se))}};function Mt(e,t,n,o){var r,i;let s=0;const l=function(c,g){g===void 0&&(g=1),s=Math.max(s,g),c.filter(h=>h.getIsVisible()).forEach(h=>{var p;(p=h.columns)!=null&&p.length&&l(h.columns,g+1)},0)};l(e);let u=[];const a=(c,g)=>{const h={depth:g,id:[o,`${g}`].filter(Boolean).join("_"),headers:[]},p=[];c.forEach(v=>{const m=[...p].reverse()[0],S=v.column.depth===h.depth;let y,x=!1;if(S&&v.column.parent?y=v.column.parent:(y=v.column,x=!0),m&&(m==null?void 0:m.column)===y)m.subHeaders.push(v);else{const E=Po(n,y,{id:[o,g,y.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:x,placeholderId:x?`${p.filter(F=>F.column===y).length}`:void 0,depth:g,index:p.length});E.subHeaders.push(v),p.push(E)}h.headers.push(v),v.headerGroup=h}),u.push(h),g>0&&a(p,g-1)},d=t.map((c,g)=>Po(n,c,{depth:s,index:g}));a(d,s-1),u.reverse();const f=c=>c.filter(h=>h.column.getIsVisible()).map(h=>{let p=0,v=0,m=[0];h.subHeaders&&h.subHeaders.length?(m=[],f(h.subHeaders).forEach(y=>{let{colSpan:x,rowSpan:E}=y;p+=x,m.push(E)})):p=1;const S=Math.min(...m);return v=v+S,h.colSpan=p,h.rowSpan=v,{colSpan:p,rowSpan:v}});return f((r=(i=u[0])==null?void 0:i.headers)!=null?r:[]),u}const Yl=(e,t,n,o,r,i,s)=>{let l={id:t,index:o,original:n,depth:r,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:u=>{if(l._valuesCache.hasOwnProperty(u))return l._valuesCache[u];const a=e.getColumn(u);if(a!=null&&a.accessorFn)return l._valuesCache[u]=a.accessorFn(l.original,o),l._valuesCache[u]},getUniqueValues:u=>{if(l._uniqueValuesCache.hasOwnProperty(u))return l._uniqueValuesCache[u];const a=e.getColumn(u);if(a!=null&&a.accessorFn)return a.columnDef.getUniqueValues?(l._uniqueValuesCache[u]=a.columnDef.getUniqueValues(l.original,o),l._uniqueValuesCache[u]):(l._uniqueValuesCache[u]=[l.getValue(u)],l._uniqueValuesCache[u])},renderValue:u=>{var a;return(a=l.getValue(u))!=null?a:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Ol(l.subRows,u=>u.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let u=[],a=l;for(;;){const d=a.getParentRow();if(!d)break;u.push(d),a=d}return u.reverse()},getAllCells:W(()=>[e.getAllLeafColumns()],u=>u.map(a=>Gl(e,l,a,a.id)),U(e.options,"debugRows")),_getAllCellsByColumnId:W(()=>[l.getAllCells()],u=>u.reduce((a,d)=>(a[d.column.id]=d,a),{}),U(e.options,"debugRows"))};for(let u=0;u<e._features.length;u++){const a=e._features[u];a==null||a.createRow==null||a.createRow(l,e)}return l},ql={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},kr=(e,t,n)=>{var o,r;const i=n==null||(o=n.toString())==null?void 0:o.toLowerCase();return!!(!((r=e.getValue(t))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};kr.autoRemove=e=>pe(e);const Dr=(e,t,n)=>{var o;return!!(!((o=e.getValue(t))==null||(o=o.toString())==null)&&o.includes(n))};Dr.autoRemove=e=>pe(e);const Hr=(e,t,n)=>{var o;return((o=e.getValue(t))==null||(o=o.toString())==null?void 0:o.toLowerCase())===(n==null?void 0:n.toLowerCase())};Hr.autoRemove=e=>pe(e);const zr=(e,t,n)=>{var o;return(o=e.getValue(t))==null?void 0:o.includes(n)};zr.autoRemove=e=>pe(e)||!(e!=null&&e.length);const Tr=(e,t,n)=>!n.some(o=>{var r;return!((r=e.getValue(t))!=null&&r.includes(o))});Tr.autoRemove=e=>pe(e)||!(e!=null&&e.length);const Lr=(e,t,n)=>n.some(o=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(o)});Lr.autoRemove=e=>pe(e)||!(e!=null&&e.length);const Br=(e,t,n)=>e.getValue(t)===n;Br.autoRemove=e=>pe(e);const Or=(e,t,n)=>e.getValue(t)==n;Or.autoRemove=e=>pe(e);const lo=(e,t,n)=>{let[o,r]=n;const i=e.getValue(t);return i>=o&&i<=r};lo.resolveFilterValue=e=>{let[t,n]=e,o=typeof t!="number"?parseFloat(t):t,r=typeof n!="number"?parseFloat(n):n,i=t===null||Number.isNaN(o)?-1/0:o,s=n===null||Number.isNaN(r)?1/0:r;if(i>s){const l=i;i=s,s=l}return[i,s]};lo.autoRemove=e=>pe(e)||pe(e[0])&&pe(e[1]);const ve={includesString:kr,includesStringSensitive:Dr,equalsString:Hr,arrIncludes:zr,arrIncludesAll:Tr,arrIncludesSome:Lr,equals:Br,weakEquals:Or,inNumberRange:lo};function pe(e){return e==null||e===""}const Wl={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ae("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],o=n==null?void 0:n.getValue(e.id);return typeof o=="string"?ve.includesString:typeof o=="number"?ve.inNumberRange:typeof o=="boolean"||o!==null&&typeof o=="object"?ve.equals:Array.isArray(o)?ve.arrIncludes:ve.weakEquals},e.getFilterFn=()=>{var n,o;return Jt(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(o=t.options.filterFns)==null?void 0:o[e.columnDef.filterFn])!=null?n:ve[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,o,r;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((o=t.options.enableColumnFilters)!=null?o:!0)&&((r=t.options.enableFilters)!=null?r:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(o=>o.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,o;return(n=(o=t.getState().columnFilters)==null?void 0:o.findIndex(r=>r.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(o=>{const r=e.getFilterFn(),i=o==null?void 0:o.find(d=>d.id===e.id),s=Pe(n,i?i.value:void 0);if(Ao(r,s,e)){var l;return(l=o==null?void 0:o.filter(d=>d.id!==e.id))!=null?l:[]}const u={id:e.id,value:s};if(i){var a;return(a=o==null?void 0:o.map(d=>d.id===e.id?u:d))!=null?a:[]}return o!=null&&o.length?[...o,u]:[u]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),o=r=>{var i;return(i=Pe(t,r))==null?void 0:i.filter(s=>{const l=n.find(u=>u.id===s.id);if(l){const u=l.getFilterFn();if(Ao(u,s.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(o)},e.resetColumnFilters=t=>{var n,o;e.setColumnFilters(t?[]:(n=(o=e.initialState)==null?void 0:o.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Ao(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Ul=(e,t,n)=>n.reduce((o,r)=>{const i=r.getValue(e);return o+(typeof i=="number"?i:0)},0),Kl=(e,t,n)=>{let o;return n.forEach(r=>{const i=r.getValue(e);i!=null&&(o>i||o===void 0&&i>=i)&&(o=i)}),o},Zl=(e,t,n)=>{let o;return n.forEach(r=>{const i=r.getValue(e);i!=null&&(o<i||o===void 0&&i>=i)&&(o=i)}),o},Ql=(e,t,n)=>{let o,r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(o===void 0?s>=s&&(o=r=s):(o>s&&(o=s),r<s&&(r=s)))}),[o,r]},Jl=(e,t)=>{let n=0,o=0;if(t.forEach(r=>{let i=r.getValue(e);i!=null&&(i=+i)>=i&&(++n,o+=i)}),n)return o/n},eu=(e,t)=>{if(!t.length)return;const n=t.map(i=>i.getValue(e));if(!Bl(n))return;if(n.length===1)return n[0];const o=Math.floor(n.length/2),r=n.sort((i,s)=>i-s);return n.length%2!==0?r[o]:(r[o-1]+r[o])/2},tu=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),nu=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,ou=(e,t)=>t.length,Cn={sum:Ul,min:Kl,max:Zl,extent:Ql,mean:Jl,median:eu,unique:tu,uniqueCount:nu,count:ou},ru={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ae("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(o=>o!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,o;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((o=t.options.enableGrouping)!=null?o:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],o=n==null?void 0:n.getValue(e.id);if(typeof o=="number")return Cn.sum;if(Object.prototype.toString.call(o)==="[object Date]")return Cn.extent},e.getAggregationFn=()=>{var n,o;if(!e)throw new Error;return Jt(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(o=t.options.aggregationFns)==null?void 0:o[e.columnDef.aggregationFn])!=null?n:Cn[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,o;e.setGrouping(t?[]:(n=(o=e.initialState)==null?void 0:o.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const o=t.getColumn(n);return o!=null&&o.columnDef.getGroupingValue?(e._groupingValuesCache[n]=o.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,o)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var r;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((r=n.subRows)!=null&&r.length)}}};function iu(e,t,n){if(!(t!=null&&t.length)||!n)return e;const o=e.filter(i=>!t.includes(i.id));return n==="remove"?o:[...t.map(i=>e.find(s=>s.id===i)).filter(Boolean),...o]}const su={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ae("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=W(n=>[lt(t,n)],n=>n.findIndex(o=>o.id===e.id),U(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var o;return((o=lt(t,n)[0])==null?void 0:o.id)===e.id},e.getIsLastColumn=n=>{var o;const r=lt(t,n);return((o=r[r.length-1])==null?void 0:o.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=W(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,o)=>r=>{let i=[];if(!(t!=null&&t.length))i=r;else{const s=[...t],l=[...r];for(;l.length&&s.length;){const u=s.shift(),a=l.findIndex(d=>d.id===u);a>-1&&i.push(l.splice(a,1)[0])}i=[...i,...l]}return iu(i,n,o)},U(e.options,"debugTable"))}},En=()=>({left:[],right:[]}),lu={getInitialState:e=>({columnPinning:En(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ae("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const o=e.getLeafColumns().map(r=>r.id).filter(Boolean);t.setColumnPinning(r=>{var i,s;if(n==="right"){var l,u;return{left:((l=r==null?void 0:r.left)!=null?l:[]).filter(f=>!(o!=null&&o.includes(f))),right:[...((u=r==null?void 0:r.right)!=null?u:[]).filter(f=>!(o!=null&&o.includes(f))),...o]}}if(n==="left"){var a,d;return{left:[...((a=r==null?void 0:r.left)!=null?a:[]).filter(f=>!(o!=null&&o.includes(f))),...o],right:((d=r==null?void 0:r.right)!=null?d:[]).filter(f=>!(o!=null&&o.includes(f)))}}return{left:((i=r==null?void 0:r.left)!=null?i:[]).filter(f=>!(o!=null&&o.includes(f))),right:((s=r==null?void 0:r.right)!=null?s:[]).filter(f=>!(o!=null&&o.includes(f)))}})},e.getCanPin=()=>e.getLeafColumns().some(o=>{var r,i,s;return((r=o.columnDef.enablePinning)!=null?r:!0)&&((i=(s=t.options.enableColumnPinning)!=null?s:t.options.enablePinning)!=null?i:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:o,right:r}=t.getState().columnPinning,i=n.some(l=>o==null?void 0:o.includes(l)),s=n.some(l=>r==null?void 0:r.includes(l));return i?"left":s?"right":!1},e.getPinnedIndex=()=>{var n,o;const r=e.getIsPinned();return r?(n=(o=t.getState().columnPinning)==null||(o=o[r])==null?void 0:o.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=W(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,o,r)=>{const i=[...o??[],...r??[]];return n.filter(s=>!i.includes(s.column.id))},U(t.options,"debugRows")),e.getLeftVisibleCells=W(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,o)=>(o??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),U(t.options,"debugRows")),e.getRightVisibleCells=W(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,o)=>(o??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),U(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,o;return e.setColumnPinning(t?En():(n=(o=e.initialState)==null?void 0:o.columnPinning)!=null?n:En())},e.getIsSomeColumnsPinned=t=>{var n;const o=e.getState().columnPinning;if(!t){var r,i;return!!((r=o.left)!=null&&r.length||(i=o.right)!=null&&i.length)}return!!((n=o[t])!=null&&n.length)},e.getLeftLeafColumns=W(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(o=>t.find(r=>r.id===o)).filter(Boolean),U(e.options,"debugColumns")),e.getRightLeafColumns=W(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(o=>t.find(r=>r.id===o)).filter(Boolean),U(e.options,"debugColumns")),e.getCenterLeafColumns=W(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,o)=>{const r=[...n??[],...o??[]];return t.filter(i=>!r.includes(i.id))},U(e.options,"debugColumns"))}},$t={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Rn=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),uu={getDefaultColumnDef:()=>$t,getInitialState:e=>({columnSizing:{},columnSizingInfo:Rn(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ae("columnSizing",e),onColumnSizingInfoChange:ae("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,o,r;const i=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:$t.minSize,(o=i??e.columnDef.size)!=null?o:$t.size),(r=e.columnDef.maxSize)!=null?r:$t.maxSize)},e.getStart=W(n=>[n,lt(t,n),t.getState().columnSizing],(n,o)=>o.slice(0,e.getIndex(n)).reduce((r,i)=>r+i.getSize(),0),U(t.options,"debugColumns")),e.getAfter=W(n=>[n,lt(t,n),t.getState().columnSizing],(n,o)=>o.slice(e.getIndex(n)+1).reduce((r,i)=>r+i.getSize(),0),U(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:o,...r}=n;return r})},e.getCanResize=()=>{var n,o;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((o=t.options.enableColumnResizing)!=null?o:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const o=r=>{if(r.subHeaders.length)r.subHeaders.forEach(o);else{var i;n+=(i=r.column.getSize())!=null?i:0}};return o(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const o=t.getColumn(e.column.id),r=o==null?void 0:o.getCanResize();return i=>{if(!o||!r||(i.persist==null||i.persist(),Mn(i)&&i.touches&&i.touches.length>1))return;const s=e.getSize(),l=e?e.getLeafHeaders().map(m=>[m.column.id,m.column.getSize()]):[[o.id,o.getSize()]],u=Mn(i)?Math.round(i.touches[0].clientX):i.clientX,a={},d=(m,S)=>{typeof S=="number"&&(t.setColumnSizingInfo(y=>{var x,E;const F=t.options.columnResizeDirection==="rtl"?-1:1,$=(S-((x=y==null?void 0:y.startOffset)!=null?x:0))*F,P=Math.max($/((E=y==null?void 0:y.startSize)!=null?E:0),-.999999);return y.columnSizingStart.forEach(V=>{let[A,z]=V;a[A]=Math.round(Math.max(z+z*P,0)*100)/100}),{...y,deltaOffset:$,deltaPercentage:P}}),(t.options.columnResizeMode==="onChange"||m==="end")&&t.setColumnSizing(y=>({...y,...a})))},f=m=>d("move",m),c=m=>{d("end",m),t.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=n||typeof document<"u"?document:null,h={moveHandler:m=>f(m.clientX),upHandler:m=>{g==null||g.removeEventListener("mousemove",h.moveHandler),g==null||g.removeEventListener("mouseup",h.upHandler),c(m.clientX)}},p={moveHandler:m=>(m.cancelable&&(m.preventDefault(),m.stopPropagation()),f(m.touches[0].clientX),!1),upHandler:m=>{var S;g==null||g.removeEventListener("touchmove",p.moveHandler),g==null||g.removeEventListener("touchend",p.upHandler),m.cancelable&&(m.preventDefault(),m.stopPropagation()),c((S=m.touches[0])==null?void 0:S.clientX)}},v=au()?{passive:!1}:!1;Mn(i)?(g==null||g.addEventListener("touchmove",p.moveHandler,v),g==null||g.addEventListener("touchend",p.upHandler,v)):(g==null||g.addEventListener("mousemove",h.moveHandler,v),g==null||g.addEventListener("mouseup",h.upHandler,v)),t.setColumnSizingInfo(m=>({...m,startOffset:u,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:o.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Rn():(n=e.initialState.columnSizingInfo)!=null?n:Rn())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((o,r)=>o+r.getSize(),0))!=null?t:0}}};let It=null;function au(){if(typeof It=="boolean")return It;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return It=e,It}function Mn(e){return e.type==="touchstart"}const cu={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ae("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(o=>({...o,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,o;const r=e.columns;return(n=r.length?r.some(i=>i.getIsVisible()):(o=t.getState().columnVisibility)==null?void 0:o[e.id])!=null?n:!0},e.getCanHide=()=>{var n,o;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((o=t.options.enableHiding)!=null?o:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=W(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(o=>o.column.getIsVisible()),U(t.options,"debugRows")),e.getVisibleCells=W(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,o,r)=>[...n,...o,...r],U(t.options,"debugRows"))},createTable:e=>{const t=(n,o)=>W(()=>[o(),o().filter(r=>r.getIsVisible()).map(r=>r.id).join("_")],r=>r.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),U(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var o;e.setColumnVisibility(n?{}:(o=e.initialState.columnVisibility)!=null?o:{})},e.toggleAllColumnsVisible=n=>{var o;n=(o=n)!=null?o:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((r,i)=>({...r,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var o;e.toggleAllColumnsVisible((o=n.target)==null?void 0:o.checked)}}};function lt(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const du={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},fu={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ae("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const o=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof o=="string"||typeof o=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,o,r,i;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((o=t.options.enableGlobalFilter)!=null?o:!0)&&((r=t.options.enableFilters)!=null?r:!0)&&((i=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?i:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>ve.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:o}=e.options;return Jt(o)?o:o==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[o])!=null?t:ve[o]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},gu={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ae("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var o,r;if(!t){e._queue(()=>{t=!0});return}if((o=(r=e.options.autoResetAll)!=null?r:e.options.autoResetExpanded)!=null?o:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=o=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(o),e.toggleAllRowsExpanded=o=>{o??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=o=>{var r,i;e.setExpanded(o?{}:(r=(i=e.initialState)==null?void 0:i.expanded)!=null?r:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(o=>o.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>o=>{o.persist==null||o.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const o=e.getState().expanded;return o===!0||Object.values(o).some(Boolean)},e.getIsAllRowsExpanded=()=>{const o=e.getState().expanded;return typeof o=="boolean"?o===!0:!(!Object.keys(o).length||e.getRowModel().flatRows.some(r=>!r.getIsExpanded()))},e.getExpandedDepth=()=>{let o=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(i=>{const s=i.split(".");o=Math.max(o,s.length)}),o},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(o=>{var r;const i=o===!0?!0:!!(o!=null&&o[e.id]);let s={};if(o===!0?Object.keys(t.getRowModel().rowsById).forEach(l=>{s[l]=!0}):s=o,n=(r=n)!=null?r:!i,!i&&n)return{...s,[e.id]:!0};if(i&&!n){const{[e.id]:l,...u}=s;return u}return o})},e.getIsExpanded=()=>{var n;const o=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:o===!0||o!=null&&o[e.id])},e.getCanExpand=()=>{var n,o,r;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((o=t.options.enableExpanding)!=null?o:!0)&&!!((r=e.subRows)!=null&&r.length)},e.getIsAllParentsExpanded=()=>{let n=!0,o=e;for(;n&&o.parentId;)o=t.getRow(o.parentId,!0),n=o.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Tn=0,Ln=10,$n=()=>({pageIndex:Tn,pageSize:Ln}),hu={getInitialState:e=>({...e,pagination:{...$n(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ae("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var o,r;if(!t){e._queue(()=>{t=!0});return}if((o=(r=e.options.autoResetAll)!=null?r:e.options.autoResetPageIndex)!=null?o:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=o=>{const r=i=>Pe(o,i);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(r)},e.resetPagination=o=>{var r;e.setPagination(o?$n():(r=e.initialState.pagination)!=null?r:$n())},e.setPageIndex=o=>{e.setPagination(r=>{let i=Pe(o,r.pageIndex);const s=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return i=Math.max(0,Math.min(i,s)),{...r,pageIndex:i}})},e.resetPageIndex=o=>{var r,i;e.setPageIndex(o?Tn:(r=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?r:Tn)},e.resetPageSize=o=>{var r,i;e.setPageSize(o?Ln:(r=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?r:Ln)},e.setPageSize=o=>{e.setPagination(r=>{const i=Math.max(1,Pe(o,r.pageSize)),s=r.pageSize*r.pageIndex,l=Math.floor(s/i);return{...r,pageIndex:l,pageSize:i}})},e.setPageCount=o=>e.setPagination(r=>{var i;let s=Pe(o,(i=e.options.pageCount)!=null?i:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...r,pageCount:s}}),e.getPageOptions=W(()=>[e.getPageCount()],o=>{let r=[];return o&&o>0&&(r=[...new Array(o)].fill(null).map((i,s)=>s)),r},U(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:o}=e.getState().pagination,r=e.getPageCount();return r===-1?!0:r===0?!1:o<r-1},e.previousPage=()=>e.setPageIndex(o=>o-1),e.nextPage=()=>e.setPageIndex(o=>o+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var o;return(o=e.options.pageCount)!=null?o:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var o;return(o=e.options.rowCount)!=null?o:e.getPrePaginationRowModel().rows.length}}},In=()=>({top:[],bottom:[]}),pu={getInitialState:e=>({rowPinning:In(),...e}),getDefaultOptions:e=>({onRowPinningChange:ae("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,o,r)=>{const i=o?e.getLeafRows().map(u=>{let{id:a}=u;return a}):[],s=r?e.getParentRows().map(u=>{let{id:a}=u;return a}):[],l=new Set([...s,e.id,...i]);t.setRowPinning(u=>{var a,d;if(n==="bottom"){var f,c;return{top:((f=u==null?void 0:u.top)!=null?f:[]).filter(p=>!(l!=null&&l.has(p))),bottom:[...((c=u==null?void 0:u.bottom)!=null?c:[]).filter(p=>!(l!=null&&l.has(p))),...Array.from(l)]}}if(n==="top"){var g,h;return{top:[...((g=u==null?void 0:u.top)!=null?g:[]).filter(p=>!(l!=null&&l.has(p))),...Array.from(l)],bottom:((h=u==null?void 0:u.bottom)!=null?h:[]).filter(p=>!(l!=null&&l.has(p)))}}return{top:((a=u==null?void 0:u.top)!=null?a:[]).filter(p=>!(l!=null&&l.has(p))),bottom:((d=u==null?void 0:u.bottom)!=null?d:[]).filter(p=>!(l!=null&&l.has(p)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:o,enablePinning:r}=t.options;return typeof o=="function"?o(e):(n=o??r)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:o,bottom:r}=t.getState().rowPinning,i=n.some(l=>o==null?void 0:o.includes(l)),s=n.some(l=>r==null?void 0:r.includes(l));return i?"top":s?"bottom":!1},e.getPinnedIndex=()=>{var n,o;const r=e.getIsPinned();if(!r)return-1;const i=(n=r==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(s=>{let{id:l}=s;return l});return(o=i==null?void 0:i.indexOf(e.id))!=null?o:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,o;return e.setRowPinning(t?In():(n=(o=e.initialState)==null?void 0:o.rowPinning)!=null?n:In())},e.getIsSomeRowsPinned=t=>{var n;const o=e.getState().rowPinning;if(!t){var r,i;return!!((r=o.top)!=null&&r.length||(i=o.bottom)!=null&&i.length)}return!!((n=o[t])!=null&&n.length)},e._getPinnedRows=(t,n,o)=>{var r;return((r=e.options.keepPinnedRows)==null||r?(n??[]).map(s=>{const l=e.getRow(s,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(s=>t.find(l=>l.id===s))).filter(Boolean).map(s=>({...s,position:o}))},e.getTopRows=W(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),U(e.options,"debugRows")),e.getBottomRows=W(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),U(e.options,"debugRows")),e.getCenterRows=W(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,o)=>{const r=new Set([...n??[],...o??[]]);return t.filter(i=>!r.has(i.id))},U(e.options,"debugRows"))}},mu={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ae("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const o={...n},r=e.getPreGroupedRowModel().flatRows;return t?r.forEach(i=>{i.getCanSelect()&&(o[i.id]=!0)}):r.forEach(i=>{delete o[i.id]}),o})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const o=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),r={...n};return e.getRowModel().rows.forEach(i=>{Bn(r,i.id,o,!0,e)}),r}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=W(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?bn(e,n):{rows:[],flatRows:[],rowsById:{}},U(e.options,"debugTable")),e.getFilteredSelectedRowModel=W(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?bn(e,n):{rows:[],flatRows:[],rowsById:{}},U(e.options,"debugTable")),e.getGroupedSelectedRowModel=W(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?bn(e,n):{rows:[],flatRows:[],rowsById:{}},U(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let o=!!(t.length&&Object.keys(n).length);return o&&t.some(r=>r.getCanSelect()&&!n[r.id])&&(o=!1),o},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(r=>r.getCanSelect()),{rowSelection:n}=e.getState();let o=!!t.length;return o&&t.some(r=>!n[r.id])&&(o=!1),o},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,o)=>{const r=e.getIsSelected();t.setRowSelection(i=>{var s;if(n=typeof n<"u"?n:!r,e.getCanSelect()&&r===n)return i;const l={...i};return Bn(l,e.id,n,(s=o==null?void 0:o.selectChildren)!=null?s:!0,t),l})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return uo(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return On(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return On(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return o=>{var r;n&&e.toggleSelected((r=o.target)==null?void 0:r.checked)}}}},Bn=(e,t,n,o,r)=>{var i;const s=r.getRow(t,!0);n?(s.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),s.getCanSelect()&&(e[t]=!0)):delete e[t],o&&(i=s.subRows)!=null&&i.length&&s.getCanSelectSubRows()&&s.subRows.forEach(l=>Bn(e,l.id,n,o,r))};function bn(e,t){const n=e.getState().rowSelection,o=[],r={},i=function(s,l){return s.map(u=>{var a;const d=uo(u,n);if(d&&(o.push(u),r[u.id]=u),(a=u.subRows)!=null&&a.length&&(u={...u,subRows:i(u.subRows)}),d)return u}).filter(Boolean)};return{rows:i(t.rows),flatRows:o,rowsById:r}}function uo(e,t){var n;return(n=t[e.id])!=null?n:!1}function On(e,t,n){var o;if(!((o=e.subRows)!=null&&o.length))return!1;let r=!0,i=!1;return e.subRows.forEach(s=>{if(!(i&&!r)&&(s.getCanSelect()&&(uo(s,t)?i=!0:r=!1),s.subRows&&s.subRows.length)){const l=On(s,t);l==="all"?i=!0:(l==="some"&&(i=!0),r=!1)}}),r?"all":i?"some":!1}const Gn=/([0-9]+)/gm,wu=(e,t,n)=>Gr(Fe(e.getValue(n)).toLowerCase(),Fe(t.getValue(n)).toLowerCase()),yu=(e,t,n)=>Gr(Fe(e.getValue(n)),Fe(t.getValue(n))),xu=(e,t,n)=>ao(Fe(e.getValue(n)).toLowerCase(),Fe(t.getValue(n)).toLowerCase()),vu=(e,t,n)=>ao(Fe(e.getValue(n)),Fe(t.getValue(n))),Su=(e,t,n)=>{const o=e.getValue(n),r=t.getValue(n);return o>r?1:o<r?-1:0},_u=(e,t,n)=>ao(e.getValue(n),t.getValue(n));function ao(e,t){return e===t?0:e>t?1:-1}function Fe(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Gr(e,t){const n=e.split(Gn).filter(Boolean),o=t.split(Gn).filter(Boolean);for(;n.length&&o.length;){const r=n.shift(),i=o.shift(),s=parseInt(r,10),l=parseInt(i,10),u=[s,l].sort();if(isNaN(u[0])){if(r>i)return 1;if(i>r)return-1;continue}if(isNaN(u[1]))return isNaN(s)?-1:1;if(s>l)return 1;if(l>s)return-1}return n.length-o.length}const nt={alphanumeric:wu,alphanumericCaseSensitive:yu,text:xu,textCaseSensitive:vu,datetime:Su,basic:_u},Cu={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ae("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let o=!1;for(const r of n){const i=r==null?void 0:r.getValue(e.id);if(Object.prototype.toString.call(i)==="[object Date]")return nt.datetime;if(typeof i=="string"&&(o=!0,i.split(Gn).length>1))return nt.alphanumeric}return o?nt.text:nt.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,o;if(!e)throw new Error;return Jt(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(o=t.options.sortingFns)==null?void 0:o[e.columnDef.sortingFn])!=null?n:nt[e.columnDef.sortingFn]},e.toggleSorting=(n,o)=>{const r=e.getNextSortingOrder(),i=typeof n<"u"&&n!==null;t.setSorting(s=>{const l=s==null?void 0:s.find(g=>g.id===e.id),u=s==null?void 0:s.findIndex(g=>g.id===e.id);let a=[],d,f=i?n:r==="desc";if(s!=null&&s.length&&e.getCanMultiSort()&&o?l?d="toggle":d="add":s!=null&&s.length&&u!==s.length-1?d="replace":l?d="toggle":d="replace",d==="toggle"&&(i||r||(d="remove")),d==="add"){var c;a=[...s,{id:e.id,desc:f}],a.splice(0,a.length-((c=t.options.maxMultiSortColCount)!=null?c:Number.MAX_SAFE_INTEGER))}else d==="toggle"?a=s.map(g=>g.id===e.id?{...g,desc:f}:g):d==="remove"?a=s.filter(g=>g.id!==e.id):a=[{id:e.id,desc:f}];return a})},e.getFirstSortDir=()=>{var n,o;return((n=(o=e.columnDef.sortDescFirst)!=null?o:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var o,r;const i=e.getFirstSortDir(),s=e.getIsSorted();return s?s!==i&&((o=t.options.enableSortingRemoval)==null||o)&&(!(n&&(r=t.options.enableMultiRemove)!=null)||r)?!1:s==="desc"?"asc":"desc":i},e.getCanSort=()=>{var n,o;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((o=t.options.enableSorting)!=null?o:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,o;return(n=(o=e.columnDef.enableMultiSort)!=null?o:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const o=(n=t.getState().sorting)==null?void 0:n.find(r=>r.id===e.id);return o?o.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,o;return(n=(o=t.getState().sorting)==null?void 0:o.findIndex(r=>r.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(o=>o.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return o=>{n&&(o.persist==null||o.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(o):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,o;e.setSorting(t?[]:(n=(o=e.initialState)==null?void 0:o.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Eu=[Xl,cu,su,lu,ql,Wl,du,fu,Cu,ru,gu,hu,pu,mu,uu];function Ru(e){var t,n;const o=[...Eu,...(t=e._features)!=null?t:[]];let r={_features:o};const i=r._features.reduce((c,g)=>Object.assign(c,g.getDefaultOptions==null?void 0:g.getDefaultOptions(r)),{}),s=c=>r.options.mergeOptions?r.options.mergeOptions(i,c):{...i,...c};let u={...{},...(n=e.initialState)!=null?n:{}};r._features.forEach(c=>{var g;u=(g=c.getInitialState==null?void 0:c.getInitialState(u))!=null?g:u});const a=[];let d=!1;const f={_features:o,options:{...i,...e},initialState:u,_queue:c=>{a.push(c),d||(d=!0,Promise.resolve().then(()=>{for(;a.length;)a.shift()();d=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{r.setState(r.initialState)},setOptions:c=>{const g=Pe(c,r.options);r.options=s(g)},getState:()=>r.options.state,setState:c=>{r.options.onStateChange==null||r.options.onStateChange(c)},_getRowId:(c,g,h)=>{var p;return(p=r.options.getRowId==null?void 0:r.options.getRowId(c,g,h))!=null?p:`${h?[h.id,g].join("."):g}`},getCoreRowModel:()=>(r._getCoreRowModel||(r._getCoreRowModel=r.options.getCoreRowModel(r)),r._getCoreRowModel()),getRowModel:()=>r.getPaginationRowModel(),getRow:(c,g)=>{let h=(g?r.getPrePaginationRowModel():r.getRowModel()).rowsById[c];if(!h&&(h=r.getCoreRowModel().rowsById[c],!h))throw new Error;return h},_getDefaultColumnDef:W(()=>[r.options.defaultColumn],c=>{var g;return c=(g=c)!=null?g:{},{header:h=>{const p=h.header.column.columnDef;return p.accessorKey?p.accessorKey:p.accessorFn?p.id:null},cell:h=>{var p,v;return(p=(v=h.renderValue())==null||v.toString==null?void 0:v.toString())!=null?p:null},...r._features.reduce((h,p)=>Object.assign(h,p.getDefaultColumnDef==null?void 0:p.getDefaultColumnDef()),{}),...c}},U(e,"debugColumns")),_getColumnDefs:()=>r.options.columns,getAllColumns:W(()=>[r._getColumnDefs()],c=>{const g=function(h,p,v){return v===void 0&&(v=0),h.map(m=>{const S=jl(r,m,v,p),y=m;return S.columns=y.columns?g(y.columns,S,v+1):[],S})};return g(c)},U(e,"debugColumns")),getAllFlatColumns:W(()=>[r.getAllColumns()],c=>c.flatMap(g=>g.getFlatColumns()),U(e,"debugColumns")),_getAllFlatColumnsById:W(()=>[r.getAllFlatColumns()],c=>c.reduce((g,h)=>(g[h.id]=h,g),{}),U(e,"debugColumns")),getAllLeafColumns:W(()=>[r.getAllColumns(),r._getOrderColumnsFn()],(c,g)=>{let h=c.flatMap(p=>p.getLeafColumns());return g(h)},U(e,"debugColumns")),getColumn:c=>r._getAllFlatColumnsById()[c]};Object.assign(r,f);for(let c=0;c<r._features.length;c++){const g=r._features[c];g==null||g.createTable==null||g.createTable(r)}return r}function Rp(){return e=>W(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},o=function(r,i,s){i===void 0&&(i=0);const l=[];for(let a=0;a<r.length;a++){const d=Yl(e,e._getRowId(r[a],a,s),r[a],a,i,void 0,s==null?void 0:s.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,l.push(d),e.options.getSubRows){var u;d.originalSubRows=e.options.getSubRows(r[a],a),(u=d.originalSubRows)!=null&&u.length&&(d.subRows=o(d.originalSubRows,i+1,d))}}return l};return n.rows=o(t),n},U(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Mu(e){const t=[],n=o=>{var r;t.push(o),(r=o.subRows)!=null&&r.length&&o.getIsExpanded()&&o.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Mp(e){return t=>W(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,o)=>{if(!o.rows.length)return o;const{pageSize:r,pageIndex:i}=n;let{rows:s,flatRows:l,rowsById:u}=o;const a=r*i,d=a+r;s=s.slice(a,d);let f;t.options.paginateExpandedRows?f={rows:s,flatRows:l,rowsById:u}:f=Mu({rows:s,flatRows:l,rowsById:u}),f.flatRows=[];const c=g=>{f.flatRows.push(g),g.subRows.length&&g.subRows.forEach(c)};return f.rows.forEach(c),f},U(t.options,"debugTable"))}function $p(){return e=>W(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const o=e.getState().sorting,r=[],i=o.filter(u=>{var a;return(a=e.getColumn(u.id))==null?void 0:a.getCanSort()}),s={};i.forEach(u=>{const a=e.getColumn(u.id);a&&(s[u.id]={sortUndefined:a.columnDef.sortUndefined,invertSorting:a.columnDef.invertSorting,sortingFn:a.getSortingFn()})});const l=u=>{const a=u.map(d=>({...d}));return a.sort((d,f)=>{for(let g=0;g<i.length;g+=1){var c;const h=i[g],p=s[h.id],v=p.sortUndefined,m=(c=h==null?void 0:h.desc)!=null?c:!1;let S=0;if(v){const y=d.getValue(h.id),x=f.getValue(h.id),E=y===void 0,F=x===void 0;if(E||F){if(v==="first")return E?-1:1;if(v==="last")return E?1:-1;S=E&&F?0:E?v:-v}}if(S===0&&(S=p.sortingFn(d,f,h.id)),S!==0)return m&&(S*=-1),p.invertSorting&&(S*=-1),S}return d.index-f.index}),a.forEach(d=>{var f;r.push(d),(f=d.subRows)!=null&&f.length&&(d.subRows=l(d.subRows))}),a};return{rows:l(n.rows),flatRows:r,rowsById:n.rowsById}},U(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ip(e,t){return e?$u(e)?N.createElement(e,t):e:null}function $u(e){return Iu(e)||typeof e=="function"||bu(e)}function Iu(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function bu(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function bp(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=N.useState(()=>({current:Ru(t)})),[o,r]=N.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...e,state:{...o,...e.state},onStateChange:s=>{r(s),e.onStateChange==null||e.onStateChange(s)}})),n.current}function ie(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ie(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Nu={value:()=>{}};function en(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new zt(n)}function zt(e){this._=e}function Pu(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}zt.prototype=en.prototype={constructor:zt,on:function(e,t){var n=this._,o=Pu(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=Au(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=Fo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Fo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Au(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Fo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Nu,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var jn="http://www.w3.org/1999/xhtml";const Vo={svg:"http://www.w3.org/2000/svg",xhtml:jn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vo.hasOwnProperty(t)?{space:Vo[t],local:e}:e}function Fu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===jn&&t.documentElement.namespaceURI===jn?t.createElement(e):t.createElementNS(n,e)}}function Vu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jr(e){var t=tn(e);return(t.local?Vu:Fu)(t)}function ku(){}function co(e){return e==null?ku:function(){return this.querySelector(e)}}function Du(e){typeof e!="function"&&(e=co(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,l=o[r]=new Array(s),u,a,d=0;d<s;++d)(u=i[d])&&(a=e.call(u,u.__data__,d,i))&&("__data__"in u&&(a.__data__=u.__data__),l[d]=a);return new ce(o,this._parents)}function Hu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zu(){return[]}function Xr(e){return e==null?zu:function(){return this.querySelectorAll(e)}}function Tu(e){return function(){return Hu(e.apply(this,arguments))}}function Lu(e){typeof e=="function"?e=Tu(e):e=Xr(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],l=s.length,u,a=0;a<l;++a)(u=s[a])&&(o.push(e.call(u,u.__data__,a,s)),r.push(u));return new ce(o,r)}function Yr(e){return function(){return this.matches(e)}}function qr(e){return function(t){return t.matches(e)}}var Bu=Array.prototype.find;function Ou(e){return function(){return Bu.call(this.children,e)}}function Gu(){return this.firstElementChild}function ju(e){return this.select(e==null?Gu:Ou(typeof e=="function"?e:qr(e)))}var Xu=Array.prototype.filter;function Yu(){return Array.from(this.children)}function qu(e){return function(){return Xu.call(this.children,e)}}function Wu(e){return this.selectAll(e==null?Yu:qu(typeof e=="function"?e:qr(e)))}function Uu(e){typeof e!="function"&&(e=Yr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,l=o[r]=[],u,a=0;a<s;++a)(u=i[a])&&e.call(u,u.__data__,a,i)&&l.push(u);return new ce(o,this._parents)}function Wr(e){return new Array(e.length)}function Ku(){return new ce(this._enter||this._groups.map(Wr),this._parents)}function Ot(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ot.prototype={constructor:Ot,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zu(e){return function(){return e}}function Qu(e,t,n,o,r,i){for(var s=0,l,u=t.length,a=i.length;s<a;++s)(l=t[s])?(l.__data__=i[s],o[s]=l):n[s]=new Ot(e,i[s]);for(;s<u;++s)(l=t[s])&&(r[s]=l)}function Ju(e,t,n,o,r,i,s){var l,u,a=new Map,d=t.length,f=i.length,c=new Array(d),g;for(l=0;l<d;++l)(u=t[l])&&(c[l]=g=s.call(u,u.__data__,l,t)+"",a.has(g)?r[l]=u:a.set(g,u));for(l=0;l<f;++l)g=s.call(e,i[l],l,i)+"",(u=a.get(g))?(o[l]=u,u.__data__=i[l],a.delete(g)):n[l]=new Ot(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&a.get(c[l])===u&&(r[l]=u)}function ea(e){return e.__data__}function ta(e,t){if(!arguments.length)return Array.from(this,ea);var n=t?Ju:Qu,o=this._parents,r=this._groups;typeof e!="function"&&(e=Zu(e));for(var i=r.length,s=new Array(i),l=new Array(i),u=new Array(i),a=0;a<i;++a){var d=o[a],f=r[a],c=f.length,g=na(e.call(d,d&&d.__data__,a,o)),h=g.length,p=l[a]=new Array(h),v=s[a]=new Array(h),m=u[a]=new Array(c);n(d,f,p,v,m,g,t);for(var S=0,y=0,x,E;S<h;++S)if(x=p[S]){for(S>=y&&(y=S+1);!(E=v[y])&&++y<h;);x._next=E||null}}return s=new ce(s,o),s._enter=l,s._exit=u,s}function na(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oa(){return new ce(this._exit||this._groups.map(Wr),this._parents)}function ra(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ia(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),l=new Array(r),u=0;u<s;++u)for(var a=n[u],d=o[u],f=a.length,c=l[u]=new Array(f),g,h=0;h<f;++h)(g=a[h]||d[h])&&(c[h]=g);for(;u<r;++u)l[u]=n[u];return new ce(l,this._parents)}function sa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function la(e){e||(e=ua);function t(f,c){return f&&c?e(f.__data__,c.__data__):!f-!c}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],l=s.length,u=r[i]=new Array(l),a,d=0;d<l;++d)(a=s[d])&&(u[d]=a);u.sort(t)}return new ce(r,this._parents).order()}function ua(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function aa(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ca(){return Array.from(this)}function da(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function fa(){let e=0;for(const t of this)++e;return e}function ga(){return!this.node()}function ha(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,l;i<s;++i)(l=r[i])&&e.call(l,l.__data__,i,r);return this}function pa(e){return function(){this.removeAttribute(e)}}function ma(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wa(e,t){return function(){this.setAttribute(e,t)}}function ya(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function va(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Sa(e,t){var n=tn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ma:pa:typeof t=="function"?n.local?va:xa:n.local?ya:wa)(n,t))}function Ur(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _a(e){return function(){this.style.removeProperty(e)}}function Ca(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ea(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ra(e,t,n){return arguments.length>1?this.each((t==null?_a:typeof t=="function"?Ea:Ca)(e,t,n??"")):Xe(this.node(),e)}function Xe(e,t){return e.style.getPropertyValue(t)||Ur(e).getComputedStyle(e,null).getPropertyValue(t)}function Ma(e){return function(){delete this[e]}}function $a(e,t){return function(){this[e]=t}}function Ia(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ba(e,t){return arguments.length>1?this.each((t==null?Ma:typeof t=="function"?Ia:$a)(e,t)):this.node()[e]}function Kr(e){return e.trim().split(/^|\s+/)}function fo(e){return e.classList||new Zr(e)}function Zr(e){this._node=e,this._names=Kr(e.getAttribute("class")||"")}Zr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qr(e,t){for(var n=fo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Jr(e,t){for(var n=fo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Na(e){return function(){Qr(this,e)}}function Pa(e){return function(){Jr(this,e)}}function Aa(e,t){return function(){(t.apply(this,arguments)?Qr:Jr)(this,e)}}function Fa(e,t){var n=Kr(e+"");if(arguments.length<2){for(var o=fo(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Aa:t?Na:Pa)(n,t))}function Va(){this.textContent=""}function ka(e){return function(){this.textContent=e}}function Da(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ha(e){return arguments.length?this.each(e==null?Va:(typeof e=="function"?Da:ka)(e)):this.node().textContent}function za(){this.innerHTML=""}function Ta(e){return function(){this.innerHTML=e}}function La(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ba(e){return arguments.length?this.each(e==null?za:(typeof e=="function"?La:Ta)(e)):this.node().innerHTML}function Oa(){this.nextSibling&&this.parentNode.appendChild(this)}function Ga(){return this.each(Oa)}function ja(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xa(){return this.each(ja)}function Ya(e){var t=typeof e=="function"?e:jr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qa(){return null}function Wa(e,t){var n=typeof e=="function"?e:jr(e),o=t==null?qa:typeof t=="function"?t:co(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ua(){var e=this.parentNode;e&&e.removeChild(this)}function Ka(){return this.each(Ua)}function Za(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qa(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ja(e){return this.select(e?Qa:Za)}function ec(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tc(e){return function(t){e.call(this,t,this.__data__)}}function nc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function oc(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function rc(e,t,n){return function(){var o=this.__on,r,i=tc(t);if(o){for(var s=0,l=o.length;s<l;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ic(e,t,n){var o=nc(e+""),r,i=o.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,d;u<a;++u)for(r=0,d=l[u];r<i;++r)if((s=o[r]).type===d.type&&s.name===d.name)return d.value}return}for(l=t?rc:oc,r=0;r<i;++r)this.each(l(o[r],t,n));return this}function ei(e,t,n){var o=Ur(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function sc(e,t){return function(){return ei(this,e,t)}}function lc(e,t){return function(){return ei(this,e,t.apply(this,arguments))}}function uc(e,t){return this.each((typeof t=="function"?lc:sc)(e,t))}function*ac(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var ti=[null];function ce(e,t){this._groups=e,this._parents=t}function vt(){return new ce([[document.documentElement]],ti)}function cc(){return this}ce.prototype=vt.prototype={constructor:ce,select:Du,selectAll:Lu,selectChild:ju,selectChildren:Wu,filter:Uu,data:ta,enter:Ku,exit:oa,join:ra,merge:ia,selection:cc,order:sa,sort:la,call:aa,nodes:ca,node:da,size:fa,empty:ga,each:ha,attr:Sa,style:Ra,property:ba,classed:Fa,text:Ha,html:Ba,raise:Ga,lower:Xa,append:Ya,insert:Wa,remove:Ka,clone:Ja,datum:ec,on:ic,dispatch:uc,[Symbol.iterator]:ac};function ue(e){return typeof e=="string"?new ce([[document.querySelector(e)]],[document.documentElement]):new ce([[e]],ti)}function dc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function fe(e,t){if(e=dc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const fc={passive:!1},ct={capture:!0,passive:!1};function Nn(e){e.stopImmediatePropagation()}function Oe(e){e.preventDefault(),e.stopImmediatePropagation()}function ni(e){var t=e.document.documentElement,n=ue(e).on("dragstart.drag",Oe,ct);"onselectstart"in t?n.on("selectstart.drag",Oe,ct):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oi(e,t){var n=e.document.documentElement,o=ue(e).on("dragstart.drag",null);t&&(o.on("click.drag",Oe,ct),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const bt=e=>()=>e;function Xn(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:l,dx:u,dy:a,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:a,enumerable:!0,configurable:!0},_:{value:d}})}Xn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function gc(e){return!e.ctrlKey&&!e.button}function hc(){return this.parentNode}function pc(e,t){return t??{x:e.x,y:e.y}}function mc(){return navigator.maxTouchPoints||"ontouchstart"in this}function ri(){var e=gc,t=hc,n=pc,o=mc,r={},i=en("start","drag","end"),s=0,l,u,a,d,f=0;function c(x){x.on("mousedown.drag",g).filter(o).on("touchstart.drag",v).on("touchmove.drag",m,fc).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(x,E){if(!(d||!e.call(this,x,E))){var F=y(this,t.call(this,x,E),x,E,"mouse");F&&(ue(x.view).on("mousemove.drag",h,ct).on("mouseup.drag",p,ct),ni(x.view),Nn(x),a=!1,l=x.clientX,u=x.clientY,F("start",x))}}function h(x){if(Oe(x),!a){var E=x.clientX-l,F=x.clientY-u;a=E*E+F*F>f}r.mouse("drag",x)}function p(x){ue(x.view).on("mousemove.drag mouseup.drag",null),oi(x.view,a),Oe(x),r.mouse("end",x)}function v(x,E){if(e.call(this,x,E)){var F=x.changedTouches,$=t.call(this,x,E),P=F.length,V,A;for(V=0;V<P;++V)(A=y(this,$,x,E,F[V].identifier,F[V]))&&(Nn(x),A("start",x,F[V]))}}function m(x){var E=x.changedTouches,F=E.length,$,P;for($=0;$<F;++$)(P=r[E[$].identifier])&&(Oe(x),P("drag",x,E[$]))}function S(x){var E=x.changedTouches,F=E.length,$,P;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),$=0;$<F;++$)(P=r[E[$].identifier])&&(Nn(x),P("end",x,E[$]))}function y(x,E,F,$,P,V){var A=i.copy(),z=fe(V||F,E),H,k,w;if((w=n.call(x,new Xn("beforestart",{sourceEvent:F,target:c,identifier:P,active:s,x:z[0],y:z[1],dx:0,dy:0,dispatch:A}),$))!=null)return H=w.x-z[0]||0,k=w.y-z[1]||0,function M(_,I,C){var R=z,D;switch(_){case"start":r[P]=M,D=s++;break;case"end":delete r[P],--s;case"drag":z=fe(C||I,E),D=s;break}A.call(_,x,new Xn(_,{sourceEvent:I,subject:w,target:c,identifier:P,active:D,x:z[0]+H,y:z[1]+k,dx:z[0]-R[0],dy:z[1]-R[1],dispatch:A}),$)}}return c.filter=function(x){return arguments.length?(e=typeof x=="function"?x:bt(!!x),c):e},c.container=function(x){return arguments.length?(t=typeof x=="function"?x:bt(x),c):t},c.subject=function(x){return arguments.length?(n=typeof x=="function"?x:bt(x),c):n},c.touchable=function(x){return arguments.length?(o=typeof x=="function"?x:bt(!!x),c):o},c.on=function(){var x=i.on.apply(i,arguments);return x===i?c:x},c.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,c):Math.sqrt(f)},c}function go(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ii(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function St(){}var dt=.7,Gt=1/dt,Ge="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wc=/^#([0-9a-f]{3,8})$/,yc=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),xc=new RegExp(`^rgb\\(${we},${we},${we}\\)$`),vc=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${ft}\\)$`),Sc=new RegExp(`^rgba\\(${we},${we},${we},${ft}\\)$`),_c=new RegExp(`^hsl\\(${ft},${we},${we}\\)$`),Cc=new RegExp(`^hsla\\(${ft},${we},${we},${ft}\\)$`),ko={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};go(St,gt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Do,formatHex:Do,formatHex8:Ec,formatHsl:Rc,formatRgb:Ho,toString:Ho});function Do(){return this.rgb().formatHex()}function Ec(){return this.rgb().formatHex8()}function Rc(){return si(this).formatHsl()}function Ho(){return this.rgb().formatRgb()}function gt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?zo(t):n===3?new le(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Nt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Nt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yc.exec(e))?new le(t[1],t[2],t[3],1):(t=xc.exec(e))?new le(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vc.exec(e))?Nt(t[1],t[2],t[3],t[4]):(t=Sc.exec(e))?Nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_c.exec(e))?Bo(t[1],t[2]/100,t[3]/100,1):(t=Cc.exec(e))?Bo(t[1],t[2]/100,t[3]/100,t[4]):ko.hasOwnProperty(e)?zo(ko[e]):e==="transparent"?new le(NaN,NaN,NaN,0):null}function zo(e){return new le(e>>16&255,e>>8&255,e&255,1)}function Nt(e,t,n,o){return o<=0&&(e=t=n=NaN),new le(e,t,n,o)}function Mc(e){return e instanceof St||(e=gt(e)),e?(e=e.rgb(),new le(e.r,e.g,e.b,e.opacity)):new le}function Yn(e,t,n,o){return arguments.length===1?Mc(e):new le(e,t,n,o??1)}function le(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}go(le,Yn,ii(St,{brighter(e){return e=e==null?Gt:Math.pow(Gt,e),new le(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dt:Math.pow(dt,e),new le(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new le(De(this.r),De(this.g),De(this.b),jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:To,formatHex:To,formatHex8:$c,formatRgb:Lo,toString:Lo}));function To(){return`#${ke(this.r)}${ke(this.g)}${ke(this.b)}`}function $c(){return`#${ke(this.r)}${ke(this.g)}${ke(this.b)}${ke((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lo(){const e=jt(this.opacity);return`${e===1?"rgb(":"rgba("}${De(this.r)}, ${De(this.g)}, ${De(this.b)}${e===1?")":`, ${e})`}`}function jt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function De(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ke(e){return e=De(e),(e<16?"0":"")+e.toString(16)}function Bo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ge(e,t,n,o)}function si(e){if(e instanceof ge)return new ge(e.h,e.s,e.l,e.opacity);if(e instanceof St||(e=gt(e)),!e)return new ge;if(e instanceof ge)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,l=i-r,u=(i+r)/2;return l?(t===i?s=(n-o)/l+(n<o)*6:n===i?s=(o-t)/l+2:s=(t-n)/l+4,l/=u<.5?i+r:2-i-r,s*=60):l=u>0&&u<1?0:s,new ge(s,l,u,e.opacity)}function Ic(e,t,n,o){return arguments.length===1?si(e):new ge(e,t,n,o??1)}function ge(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}go(ge,Ic,ii(St,{brighter(e){return e=e==null?Gt:Math.pow(Gt,e),new ge(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dt:Math.pow(dt,e),new ge(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new le(Pn(e>=240?e-240:e+120,r,o),Pn(e,r,o),Pn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ge(Oo(this.h),Pt(this.s),Pt(this.l),jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jt(this.opacity);return`${e===1?"hsl(":"hsla("}${Oo(this.h)}, ${Pt(this.s)*100}%, ${Pt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Oo(e){return e=(e||0)%360,e<0?e+360:e}function Pt(e){return Math.max(0,Math.min(1,e||0))}function Pn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const li=e=>()=>e;function bc(e,t){return function(n){return e+n*t}}function Nc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Pc(e){return(e=+e)==1?ui:function(t,n){return n-t?Nc(t,n,e):li(isNaN(t)?n:t)}}function ui(e,t){var n=t-e;return n?bc(e,n):li(isNaN(e)?t:e)}const Go=function e(t){var n=Pc(t);function o(r,i){var s=n((r=Yn(r)).r,(i=Yn(i)).r),l=n(r.g,i.g),u=n(r.b,i.b),a=ui(r.opacity,i.opacity);return function(d){return r.r=s(d),r.g=l(d),r.b=u(d),r.opacity=a(d),r+""}}return o.gamma=e,o}(1);function be(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var qn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,An=new RegExp(qn.source,"g");function Ac(e){return function(){return e}}function Fc(e){return function(t){return e(t)+""}}function Vc(e,t){var n=qn.lastIndex=An.lastIndex=0,o,r,i,s=-1,l=[],u=[];for(e=e+"",t=t+"";(o=qn.exec(e))&&(r=An.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[s]?l[s]+=i:l[++s]=i),(o=o[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,u.push({i:s,x:be(o,r)})),n=An.lastIndex;return n<t.length&&(i=t.slice(n),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?Fc(u[0].x):Ac(t):(t=u.length,function(a){for(var d=0,f;d<t;++d)l[(f=u[d]).i]=f.x(a);return l.join("")})}var jo=180/Math.PI,Wn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ai(e,t,n,o,r,i){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*jo,skewX:Math.atan(u)*jo,scaleX:s,scaleY:l}}var At;function kc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wn:ai(t.a,t.b,t.c,t.d,t.e,t.f)}function Dc(e){return e==null||(At||(At=document.createElementNS("http://www.w3.org/2000/svg","g")),At.setAttribute("transform",e),!(e=At.transform.baseVal.consolidate()))?Wn:(e=e.matrix,ai(e.a,e.b,e.c,e.d,e.e,e.f))}function ci(e,t,n,o){function r(a){return a.length?a.pop()+" ":""}function i(a,d,f,c,g,h){if(a!==f||d!==c){var p=g.push("translate(",null,t,null,n);h.push({i:p-4,x:be(a,f)},{i:p-2,x:be(d,c)})}else(f||c)&&g.push("translate("+f+t+c+n)}function s(a,d,f,c){a!==d?(a-d>180?d+=360:d-a>180&&(a+=360),c.push({i:f.push(r(f)+"rotate(",null,o)-2,x:be(a,d)})):d&&f.push(r(f)+"rotate("+d+o)}function l(a,d,f,c){a!==d?c.push({i:f.push(r(f)+"skewX(",null,o)-2,x:be(a,d)}):d&&f.push(r(f)+"skewX("+d+o)}function u(a,d,f,c,g,h){if(a!==f||d!==c){var p=g.push(r(g)+"scale(",null,",",null,")");h.push({i:p-4,x:be(a,f)},{i:p-2,x:be(d,c)})}else(f!==1||c!==1)&&g.push(r(g)+"scale("+f+","+c+")")}return function(a,d){var f=[],c=[];return a=e(a),d=e(d),i(a.translateX,a.translateY,d.translateX,d.translateY,f,c),s(a.rotate,d.rotate,f,c),l(a.skewX,d.skewX,f,c),u(a.scaleX,a.scaleY,d.scaleX,d.scaleY,f,c),a=d=null,function(g){for(var h=-1,p=c.length,v;++h<p;)f[(v=c[h]).i]=v.x(g);return f.join("")}}}var Hc=ci(kc,"px, ","px)","deg)"),zc=ci(Dc,", ",")",")"),Tc=1e-12;function Xo(e){return((e=Math.exp(e))+1/e)/2}function Lc(e){return((e=Math.exp(e))-1/e)/2}function Bc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Oc=function e(t,n,o){function r(i,s){var l=i[0],u=i[1],a=i[2],d=s[0],f=s[1],c=s[2],g=d-l,h=f-u,p=g*g+h*h,v,m;if(p<Tc)m=Math.log(c/a)/t,v=function($){return[l+$*g,u+$*h,a*Math.exp(t*$*m)]};else{var S=Math.sqrt(p),y=(c*c-a*a+o*p)/(2*a*n*S),x=(c*c-a*a-o*p)/(2*c*n*S),E=Math.log(Math.sqrt(y*y+1)-y),F=Math.log(Math.sqrt(x*x+1)-x);m=(F-E)/t,v=function($){var P=$*m,V=Xo(E),A=a/(n*S)*(V*Bc(t*P+E)-Lc(E));return[l+A*g,u+A*h,a*V/Xo(t*P+E)]}}return v.duration=m*1e3*t/Math.SQRT2,v}return r.rho=function(i){var s=Math.max(.001,+i),l=s*s,u=l*l;return e(s,l,u)},r}(Math.SQRT2,2,4);var Ye=0,it=0,ot=0,di=1e3,Xt,st,Yt=0,ze=0,nn=0,ht=typeof performance=="object"&&performance.now?performance:Date,fi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ho(){return ze||(fi(Gc),ze=ht.now()+nn)}function Gc(){ze=0}function qt(){this._call=this._time=this._next=null}qt.prototype=gi.prototype={constructor:qt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ho():+n)+(t==null?0:+t),!this._next&&st!==this&&(st?st._next=this:Xt=this,st=this),this._call=e,this._time=n,Un()},stop:function(){this._call&&(this._call=null,this._time=1/0,Un())}};function gi(e,t,n){var o=new qt;return o.restart(e,t,n),o}function jc(){ho(),++Ye;for(var e=Xt,t;e;)(t=ze-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ye}function Yo(){ze=(Yt=ht.now())+nn,Ye=it=0;try{jc()}finally{Ye=0,Yc(),ze=0}}function Xc(){var e=ht.now(),t=e-Yt;t>di&&(nn-=t,Yt=e)}function Yc(){for(var e,t=Xt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Xt=n);st=e,Un(o)}function Un(e){if(!Ye){it&&(it=clearTimeout(it));var t=e-ze;t>24?(e<1/0&&(it=setTimeout(Yo,e-ht.now()-nn)),ot&&(ot=clearInterval(ot))):(ot||(Yt=ht.now(),ot=setInterval(Xc,di)),Ye=1,fi(Yo))}}function qo(e,t,n){var o=new qt;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var qc=en("start","end","cancel","interrupt"),Wc=[],hi=0,Wo=1,Kn=2,Tt=3,Uo=4,Zn=5,Lt=6;function on(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Uc(e,n,{name:t,index:o,group:r,on:qc,tween:Wc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:hi})}function po(e,t){var n=me(e,t);if(n.state>hi)throw new Error("too late; already scheduled");return n}function ye(e,t){var n=me(e,t);if(n.state>Tt)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Uc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=gi(i,0,n.time);function i(a){n.state=Wo,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var d,f,c,g;if(n.state!==Wo)return u();for(d in o)if(g=o[d],g.name===n.name){if(g.state===Tt)return qo(s);g.state===Uo?(g.state=Lt,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete o[d]):+d<t&&(g.state=Lt,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete o[d])}if(qo(function(){n.state===Tt&&(n.state=Uo,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=Kn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Kn){for(n.state=Tt,r=new Array(c=n.tween.length),d=0,f=-1;d<c;++d)(g=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=g);r.length=f+1}}function l(a){for(var d=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=Zn,1),f=-1,c=r.length;++f<c;)r[f].call(e,d);n.state===Zn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Lt,n.timer.stop(),delete o[t];for(var a in o)return;delete e.__transition}}function Bt(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>Kn&&o.state<Zn,o.state=Lt,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function Kc(e){return this.each(function(){Bt(this,e)})}function Zc(e,t){var n,o;return function(){var r=ye(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,l=o.length;s<l;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function Qc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=ye(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var l={name:t,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===t){r[u]=l;break}u===a&&r.push(l)}i.tween=r}}function Jc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=me(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?Zc:Qc)(n,e,t))}function mo(e,t,n){var o=e._id;return e.each(function(){var r=ye(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return me(r,o).value[t]}}function pi(e,t){var n;return(typeof t=="number"?be:t instanceof gt?Go:(n=gt(t))?(t=n,Go):Vc)(e,t)}function ed(e){return function(){this.removeAttribute(e)}}function td(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nd(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function od(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function rd(e,t,n){var o,r,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===o&&u===r?i:(r=u,i=t(o=s,l)))}}function id(e,t,n){var o,r,i;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===o&&u===r?i:(r=u,i=t(o=s,l)))}}function sd(e,t){var n=tn(e),o=n==="transform"?zc:pi;return this.attrTween(e,typeof t=="function"?(n.local?id:rd)(n,o,mo(this,"attr."+e,t)):t==null?(n.local?td:ed)(n):(n.local?od:nd)(n,o,t))}function ld(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ud(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ad(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ud(e,i)),n}return r._value=t,r}function cd(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ld(e,i)),n}return r._value=t,r}function dd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=tn(e);return this.tween(n,(o.local?ad:cd)(o,t))}function fd(e,t){return function(){po(this,e).delay=+t.apply(this,arguments)}}function gd(e,t){return t=+t,function(){po(this,e).delay=t}}function hd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fd:gd)(t,e)):me(this.node(),t).delay}function pd(e,t){return function(){ye(this,e).duration=+t.apply(this,arguments)}}function md(e,t){return t=+t,function(){ye(this,e).duration=t}}function wd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pd:md)(t,e)):me(this.node(),t).duration}function yd(e,t){if(typeof t!="function")throw new Error;return function(){ye(this,e).ease=t}}function xd(e){var t=this._id;return arguments.length?this.each(yd(t,e)):me(this.node(),t).ease}function vd(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ye(this,e).ease=n}}function Sd(e){if(typeof e!="function")throw new Error;return this.each(vd(this._id,e))}function _d(e){typeof e!="function"&&(e=Yr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,l=o[r]=[],u,a=0;a<s;++a)(u=i[a])&&e.call(u,u.__data__,a,i)&&l.push(u);return new Ce(o,this._parents,this._name,this._id)}function Cd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),l=0;l<i;++l)for(var u=t[l],a=n[l],d=u.length,f=s[l]=new Array(d),c,g=0;g<d;++g)(c=u[g]||a[g])&&(f[g]=c);for(;l<o;++l)s[l]=t[l];return new Ce(s,this._parents,this._name,this._id)}function Ed(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Rd(e,t,n){var o,r,i=Ed(t)?po:ye;return function(){var s=i(this,e),l=s.on;l!==o&&(r=(o=l).copy()).on(t,n),s.on=r}}function Md(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each(Rd(n,e,t))}function $d(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Id(){return this.on("end.remove",$d(this._id))}function bd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=co(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var l=o[s],u=l.length,a=i[s]=new Array(u),d,f,c=0;c<u;++c)(d=l[c])&&(f=e.call(d,d.__data__,c,l))&&("__data__"in d&&(f.__data__=d.__data__),a[c]=f,on(a[c],t,n,c,a,me(d,n)));return new Ce(i,this._parents,t,n)}function Nd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xr(e));for(var o=this._groups,r=o.length,i=[],s=[],l=0;l<r;++l)for(var u=o[l],a=u.length,d,f=0;f<a;++f)if(d=u[f]){for(var c=e.call(d,d.__data__,f,u),g,h=me(d,n),p=0,v=c.length;p<v;++p)(g=c[p])&&on(g,t,n,p,c,h);i.push(c),s.push(d)}return new Ce(i,s,t,n)}var Pd=vt.prototype.constructor;function Ad(){return new Pd(this._groups,this._parents)}function Fd(e,t){var n,o,r;return function(){var i=Xe(this,e),s=(this.style.removeProperty(e),Xe(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function mi(e){return function(){this.style.removeProperty(e)}}function Vd(e,t,n){var o,r=n+"",i;return function(){var s=Xe(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function kd(e,t,n){var o,r,i;return function(){var s=Xe(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Xe(this,e))),s===u?null:s===o&&u===r?i:(r=u,i=t(o=s,l))}}function Dd(e,t){var n,o,r,i="style."+t,s="end."+i,l;return function(){var u=ye(this,e),a=u.on,d=u.value[i]==null?l||(l=mi(t)):void 0;(a!==n||r!==d)&&(o=(n=a).copy()).on(s,r=d),u.on=o}}function Hd(e,t,n){var o=(e+="")=="transform"?Hc:pi;return t==null?this.styleTween(e,Fd(e,o)).on("end.style."+e,mi(e)):typeof t=="function"?this.styleTween(e,kd(e,o,mo(this,"style."+e,t))).each(Dd(this._id,e)):this.styleTween(e,Vd(e,o,t),n).on("end.style."+e,null)}function zd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Td(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&zd(e,s,n)),o}return i._value=t,i}function Ld(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Td(e,t,n??""))}function Bd(e){return function(){this.textContent=e}}function Od(e){return function(){var t=e(this);this.textContent=t??""}}function Gd(e){return this.tween("text",typeof e=="function"?Od(mo(this,"text",e)):Bd(e==null?"":e+""))}function jd(e){return function(t){this.textContent=e.call(this,t)}}function Xd(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&jd(r)),t}return o._value=e,o}function Yd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xd(e))}function qd(){for(var e=this._name,t=this._id,n=wi(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],l=s.length,u,a=0;a<l;++a)if(u=s[a]){var d=me(u,t);on(u,e,n,a,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ce(o,this._parents,e,n)}function Wd(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--r===0&&i()}};n.each(function(){var a=ye(this,o),d=a.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),a.on=t}),r===0&&i()})}var Ud=0;function Ce(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function wi(){return++Ud}var xe=vt.prototype;Ce.prototype={constructor:Ce,select:bd,selectAll:Nd,selectChild:xe.selectChild,selectChildren:xe.selectChildren,filter:_d,merge:Cd,selection:Ad,transition:qd,call:xe.call,nodes:xe.nodes,node:xe.node,size:xe.size,empty:xe.empty,each:xe.each,on:Md,attr:sd,attrTween:dd,style:Hd,styleTween:Ld,text:Gd,textTween:Yd,remove:Id,tween:Jc,delay:hd,duration:wd,ease:xd,easeVarying:Sd,end:Wd,[Symbol.iterator]:xe[Symbol.iterator]};function Kd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Zd={time:null,delay:0,duration:250,ease:Kd};function Qd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Jd(e){var t,n;e instanceof Ce?(t=e._id,e=e._name):(t=wi(),(n=Zd).time=ho(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],l=s.length,u,a=0;a<l;++a)(u=s[a])&&on(u,e,t,a,s,n||Qd(u,t));return new Ce(o,this._parents,e,t)}vt.prototype.interrupt=Kc;vt.prototype.transition=Jd;const Ft=e=>()=>e;function ef(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Se(e,t,n){this.k=e,this.x=t,this.y=n}Se.prototype={constructor:Se,scale:function(e){return e===1?this:new Se(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Se(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rn=new Se(1,0,0);yi.prototype=Se.prototype;function yi(e){for(;!e.__zoom;)if(!(e=e.parentNode))return rn;return e.__zoom}function Fn(e){e.stopImmediatePropagation()}function rt(e){e.preventDefault(),e.stopImmediatePropagation()}function tf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function nf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ko(){return this.__zoom||rn}function of(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rf(){return navigator.maxTouchPoints||"ontouchstart"in this}function sf(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function xi(){var e=tf,t=nf,n=sf,o=of,r=rf,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Oc,a=en("start","zoom","end"),d,f,c,g=500,h=150,p=0,v=10;function m(w){w.property("__zoom",Ko).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",z).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(w,M,_,I){var C=w.selection?w.selection():w;C.property("__zoom",Ko),w!==C?E(w,M,_,I):C.interrupt().each(function(){F(this,arguments).event(I).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},m.scaleBy=function(w,M,_,I){m.scaleTo(w,function(){var C=this.__zoom.k,R=typeof M=="function"?M.apply(this,arguments):M;return C*R},_,I)},m.scaleTo=function(w,M,_,I){m.transform(w,function(){var C=t.apply(this,arguments),R=this.__zoom,D=_==null?x(C):typeof _=="function"?_.apply(this,arguments):_,T=R.invert(D),L=typeof M=="function"?M.apply(this,arguments):M;return n(y(S(R,L),D,T),C,s)},_,I)},m.translateBy=function(w,M,_,I){m.transform(w,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),s)},null,I)},m.translateTo=function(w,M,_,I,C){m.transform(w,function(){var R=t.apply(this,arguments),D=this.__zoom,T=I==null?x(R):typeof I=="function"?I.apply(this,arguments):I;return n(rn.translate(T[0],T[1]).scale(D.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof _=="function"?-_.apply(this,arguments):-_),R,s)},I,C)};function S(w,M){return M=Math.max(i[0],Math.min(i[1],M)),M===w.k?w:new Se(M,w.x,w.y)}function y(w,M,_){var I=M[0]-_[0]*w.k,C=M[1]-_[1]*w.k;return I===w.x&&C===w.y?w:new Se(w.k,I,C)}function x(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function E(w,M,_,I){w.on("start.zoom",function(){F(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(I).end()}).tween("zoom",function(){var C=this,R=arguments,D=F(C,R).event(I),T=t.apply(C,R),L=_==null?x(T):typeof _=="function"?_.apply(C,R):_,Y=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),O=C.__zoom,G=typeof M=="function"?M.apply(C,R):M,X=u(O.invert(L).concat(Y/O.k),G.invert(L).concat(Y/G.k));return function(K){if(K===1)K=G;else{var B=X(K),Z=Y/B[2];K=new Se(Z,L[0]-B[0]*Z,L[1]-B[1]*Z)}D.zoom(null,K)}})}function F(w,M,_){return!_&&w.__zooming||new $(w,M)}function $(w,M){this.that=w,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,M),this.taps=0}$.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,M){return this.mouse&&w!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var M=ue(this.that).datum();a.call(w,this.that,new ef(w,{sourceEvent:this.sourceEvent,target:m,type:w,transform:this.that.__zoom,dispatch:a}),M)}};function P(w,...M){if(!e.apply(this,arguments))return;var _=F(this,M).event(w),I=this.__zoom,C=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,o.apply(this,arguments)))),R=fe(w);if(_.wheel)(_.mouse[0][0]!==R[0]||_.mouse[0][1]!==R[1])&&(_.mouse[1]=I.invert(_.mouse[0]=R)),clearTimeout(_.wheel);else{if(I.k===C)return;_.mouse=[R,I.invert(R)],Bt(this),_.start()}rt(w),_.wheel=setTimeout(D,h),_.zoom("mouse",n(y(S(I,C),_.mouse[0],_.mouse[1]),_.extent,s));function D(){_.wheel=null,_.end()}}function V(w,...M){if(c||!e.apply(this,arguments))return;var _=w.currentTarget,I=F(this,M,!0).event(w),C=ue(w.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",Y,!0),R=fe(w,_),D=w.clientX,T=w.clientY;ni(w.view),Fn(w),I.mouse=[R,this.__zoom.invert(R)],Bt(this),I.start();function L(O){if(rt(O),!I.moved){var G=O.clientX-D,X=O.clientY-T;I.moved=G*G+X*X>p}I.event(O).zoom("mouse",n(y(I.that.__zoom,I.mouse[0]=fe(O,_),I.mouse[1]),I.extent,s))}function Y(O){C.on("mousemove.zoom mouseup.zoom",null),oi(O.view,I.moved),rt(O),I.event(O).end()}}function A(w,...M){if(e.apply(this,arguments)){var _=this.__zoom,I=fe(w.changedTouches?w.changedTouches[0]:w,this),C=_.invert(I),R=_.k*(w.shiftKey?.5:2),D=n(y(S(_,R),I,C),t.apply(this,M),s);rt(w),l>0?ue(this).transition().duration(l).call(E,D,I,w):ue(this).call(m.transform,D,I,w)}}function z(w,...M){if(e.apply(this,arguments)){var _=w.touches,I=_.length,C=F(this,M,w.changedTouches.length===I).event(w),R,D,T,L;for(Fn(w),D=0;D<I;++D)T=_[D],L=fe(T,this),L=[L,this.__zoom.invert(L),T.identifier],C.touch0?!C.touch1&&C.touch0[2]!==L[2]&&(C.touch1=L,C.taps=0):(C.touch0=L,R=!0,C.taps=1+!!d);d&&(d=clearTimeout(d)),R&&(C.taps<2&&(f=L[0],d=setTimeout(function(){d=null},g)),Bt(this),C.start())}}function H(w,...M){if(this.__zooming){var _=F(this,M).event(w),I=w.changedTouches,C=I.length,R,D,T,L;for(rt(w),R=0;R<C;++R)D=I[R],T=fe(D,this),_.touch0&&_.touch0[2]===D.identifier?_.touch0[0]=T:_.touch1&&_.touch1[2]===D.identifier&&(_.touch1[0]=T);if(D=_.that.__zoom,_.touch1){var Y=_.touch0[0],O=_.touch0[1],G=_.touch1[0],X=_.touch1[1],K=(K=G[0]-Y[0])*K+(K=G[1]-Y[1])*K,B=(B=X[0]-O[0])*B+(B=X[1]-O[1])*B;D=S(D,Math.sqrt(K/B)),T=[(Y[0]+G[0])/2,(Y[1]+G[1])/2],L=[(O[0]+X[0])/2,(O[1]+X[1])/2]}else if(_.touch0)T=_.touch0[0],L=_.touch0[1];else return;_.zoom("touch",n(y(D,T,L),_.extent,s))}}function k(w,...M){if(this.__zooming){var _=F(this,M).event(w),I=w.changedTouches,C=I.length,R,D;for(Fn(w),c&&clearTimeout(c),c=setTimeout(function(){c=null},g),R=0;R<C;++R)D=I[R],_.touch0&&_.touch0[2]===D.identifier?delete _.touch0:_.touch1&&_.touch1[2]===D.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(D=fe(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<v)){var T=ue(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return m.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:Ft(+w),m):o},m.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Ft(!!w),m):e},m.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Ft(!!w),m):r},m.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Ft([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),m):t},m.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],m):[i[0],i[1]]},m.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(w){return arguments.length?(n=w,m):n},m.duration=function(w){return arguments.length?(l=+w,m):l},m.interpolate=function(w){return arguments.length?(u=w,m):u},m.on=function(){var w=a.on.apply(a,arguments);return w===a?m:w},m.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,m):Math.sqrt(p)},m.tapDistance=function(w){return arguments.length?(v=+w,m):v},m}const Ee={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},pt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vi=["Enter"," ","Escape"];var qe;(function(e){e.Strict="strict",e.Loose="loose"})(qe||(qe={}));var He;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(He||(He={}));var mt;(function(e){e.Partial="partial",e.Full="full"})(mt||(mt={}));const Si={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ne;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ne||(Ne={}));var Wt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Wt||(Wt={}));var q;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(q||(q={}));const Zo={[q.Left]:q.Right,[q.Right]:q.Left,[q.Top]:q.Bottom,[q.Bottom]:q.Top};function _i(e){return e===null?null:e?"valid":"invalid"}const Ci=e=>"id"in e&&"source"in e&&"target"in e,lf=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),wo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),_t=(e,t=[0,0])=>{const{width:n,height:o}=Re(e),r=e.origin??t,i=n*r[0],s=o*r[1];return{x:e.position.x-i,y:e.position.y-s}},uf=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const i=typeof r=="string";let s=!t.nodeLookup&&!i?r:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(r):wo(r)?r:t.nodeLookup.get(r.id));const l=s?Ut(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return sn(o,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ln(n)},Ct=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=Ut(o);n=sn(n,r)}}),ln(n)},Ei=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1)=>{const l={...Et(t,[n,o,r]),width:t.width/r,height:t.height/r},u=[];for(const a of e.values()){const{measured:d,selectable:f=!0,hidden:c=!1}=a;if(s&&!f||c)continue;const g=d.width??a.width??a.initialWidth??null,h=d.height??a.height??a.initialHeight??null,p=wt(l,Ue(a)),v=(g??0)*(h??0),m=i&&p>0;(!a.internals.handleBounds||m||p>=v||a.dragging)&&u.push(a)}return u},af=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function Qn(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function Jn({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},s){if(e.size===0)return Promise.resolve(!1);const l=Ct(e),u=yo(l,t,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await o.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Ri({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const s=n.get(e),l=s.parentId?n.get(s.parentId):void 0,{x:u,y:a}=l?l.internals.positionAbsolute:{x:0,y:0},d=s.origin??o;let f=r;if(s.extent==="parent"&&!s.expandParent)if(!l)i==null||i("005",Ee.error005());else{const g=l.measured.width,h=l.measured.height;g&&h&&(f=[[u,a],[u+g,a+h]])}else l&&Ke(s.extent)&&(f=[[s.extent[0][0]+u,s.extent[0][1]+a],[s.extent[1][0]+u,s.extent[1][1]+a]]);const c=Ke(f)?Te(t,f,s.measured):t;return{position:{x:c.x-u+s.measured.width*d[0],y:c.y-a+s.measured.height*d[1]},positionAbsolute:c}}async function cf({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map(c=>c.id)),s=[];for(const c of n){if(c.deletable===!1)continue;const g=i.has(c.id),h=!g&&c.parentId&&s.find(p=>p.id===c.parentId);(g||h)&&s.push(c)}const l=new Set(t.map(c=>c.id)),u=o.filter(c=>c.deletable!==!1),d=af(s,u);for(const c of u)l.has(c.id)&&!d.find(h=>h.id===c.id)&&d.push(c);if(!r)return{edges:d,nodes:s};const f=await r({nodes:s,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:s}:{edges:[],nodes:[]}:f}const We=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Te=(e={x:0,y:0},t,n)=>({x:We(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:We(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Mi(e,t,n){const{width:o,height:r}=Re(n),{x:i,y:s}=n.internals.positionAbsolute;return Te(e,[[i,s],[i+o,s+r]],t)}const Qo=(e,t,n)=>e<t?We(Math.abs(e-t),1,t)/t:e>n?-We(Math.abs(e-n),1,t)/t:0,$i=(e,t,n=15,o=40)=>{const r=Qo(e.x,o,t.width-o)*n,i=Qo(e.y,o,t.height-o)*n;return[r,i]},sn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),eo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),ln=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Ue=(e,t=[0,0])=>{var r,i;const{x:n,y:o}=wo(e)?e.internals.positionAbsolute:_t(e,t);return{x:n,y:o,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Ut=(e,t=[0,0])=>{var r,i;const{x:n,y:o}=wo(e)?e.internals.positionAbsolute:_t(e,t);return{x:n,y:o,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:o+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},Ii=(e,t)=>ln(sn(eo(e),eo(t))),wt=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Jo=e=>he(e.width)&&he(e.height)&&he(e.x)&&he(e.y),he=e=>!isNaN(e)&&isFinite(e),df=(e,t)=>{},un=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Et=({x:e,y:t},[n,o,r],i=!1,s=[1,1])=>{const l={x:(e-n)/r,y:(t-o)/r};return i?un(l,s):l},bi=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),yo=(e,t,n,o,r,i)=>{const s=t/(e.width*(1+i)),l=n/(e.height*(1+i)),u=Math.min(s,l),a=We(u,o,r),d=e.x+e.width/2,f=e.y+e.height/2,c=t/2-d*a,g=n/2-f*a;return{x:c,y:g,zoom:a}},Kt=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ke(e){return e!==void 0&&e!=="parent"}function Re(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Ni(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Pi(e,t={width:0,height:0},n,o,r){let i=n;const s={...e};for(;i;){const l=o.get(i);if(i=l==null?void 0:l.parentId,l){const u=l.origin||r;s.x+=l.internals.positionAbsolute.x-(t.width??0)*u[0],s.y+=l.internals.positionAbsolute.y-(t.height??0)*u[1]}}return s}function ut(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o}){const{x:r,y:i}=_e(e),s=Et({x:r,y:i},o),{x:l,y:u}=n?un(s,t):s;return{xSnapped:l,ySnapped:u,...s}}const an=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ai=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ff=["INPUT","SELECT","TEXTAREA"];function to(e){var o,r;const t=((r=(o=e.composedPath)==null?void 0:o.call(e))==null?void 0:r[0])||e.target;return ff.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Fi=e=>"clientX"in e,_e=(e,t)=>{var i,s;const n=Fi(e),o=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},er=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...an(s)}})};function Vi({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:l}){const u=e*.125+r*.375+s*.375+n*.125,a=t*.125+i*.375+l*.375+o*.125,d=Math.abs(u-e),f=Math.abs(a-t);return[u,a,d,f]}function Vt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function tr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case q.Left:return[t-Vt(t-o,i),n];case q.Right:return[t+Vt(o-t,i),n];case q.Top:return[t,n-Vt(n-r,i)];case q.Bottom:return[t,n+Vt(r-n,i)]}}function ki({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:r,targetPosition:i=q.Top,curvature:s=.25}){const[l,u]=tr({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[a,d]=tr({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[f,c,g,h]=Vi({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:a,targetControlY:d});return[`M${e},${t} C${l},${u} ${a},${d} ${o},${r}`,f,c,g,h]}function Di({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,l=o<t?o+s:o-s;return[i,l,r,s]}function gf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?s:0)}function hf({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=sn(Ut(e),Ut(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return wt(s,ln(i))>0}const pf=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,mf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),wf=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ci(e)?n={...e}:n={...e,id:pf(e)},mf(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Hi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,l]=Di({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,l]}const nr={[q.Left]:{x:-1,y:0},[q.Right]:{x:1,y:0},[q.Top]:{x:0,y:-1},[q.Bottom]:{x:0,y:1}},yf=({source:e,sourcePosition:t=q.Bottom,target:n})=>t===q.Left||t===q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},or=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function xf({source:e,sourcePosition:t=q.Bottom,target:n,targetPosition:o=q.Top,center:r,offset:i}){const s=nr[t],l=nr[o],u={x:e.x+s.x*i,y:e.y+s.y*i},a={x:n.x+l.x*i,y:n.y+l.y*i},d=yf({source:u,sourcePosition:t,target:a}),f=d.x!==0?"x":"y",c=d[f];let g=[],h,p;const v={x:0,y:0},m={x:0,y:0},[S,y,x,E]=Di({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*l[f]===-1){h=r.x??S,p=r.y??y;const $=[{x:h,y:u.y},{x:h,y:a.y}],P=[{x:u.x,y:p},{x:a.x,y:p}];s[f]===c?g=f==="x"?$:P:g=f==="x"?P:$}else{const $=[{x:u.x,y:a.y}],P=[{x:a.x,y:u.y}];if(f==="x"?g=s.x===c?P:$:g=s.y===c?$:P,t===o){const k=Math.abs(e[f]-n[f]);if(k<=i){const w=Math.min(i-1,i-k);s[f]===c?v[f]=(u[f]>e[f]?-1:1)*w:m[f]=(a[f]>n[f]?-1:1)*w}}if(t!==o){const k=f==="x"?"y":"x",w=s[f]===l[k],M=u[k]>a[k],_=u[k]<a[k];(s[f]===1&&(!w&&M||w&&_)||s[f]!==1&&(!w&&_||w&&M))&&(g=f==="x"?$:P)}const V={x:u.x+v.x,y:u.y+v.y},A={x:a.x+m.x,y:a.y+m.y},z=Math.max(Math.abs(V.x-g[0].x),Math.abs(A.x-g[0].x)),H=Math.max(Math.abs(V.y-g[0].y),Math.abs(A.y-g[0].y));z>=H?(h=(V.x+A.x)/2,p=g[0].y):(h=g[0].x,p=(V.y+A.y)/2)}return[[e,{x:u.x+v.x,y:u.y+v.y},...g,{x:a.x+m.x,y:a.y+m.y},n],h,p,x,E]}function vf(e,t,n,o){const r=Math.min(or(e,t)/2,or(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const a=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*a},${s}Q ${i},${s} ${i},${s+r*d}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${i},${s+r*u}Q ${i},${s} ${i+r*l},${s}`}function no({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:r,targetPosition:i=q.Top,borderRadius:s=5,centerX:l,centerY:u,offset:a=20}){const[d,f,c,g,h]=xf({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:l,y:u},offset:a});return[d.reduce((v,m,S)=>{let y="";return S>0&&S<d.length-1?y=vf(d[S-1],m,d[S+1],s):y=`${S===0?"M":"L"}${m.x} ${m.y}`,v+=y,v},""),f,c,g,h]}function rr(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Sf(e){var f;const{sourceNode:t,targetNode:n}=e;if(!rr(t)||!rr(n))return null;const o=t.internals.handleBounds||ir(t.handles),r=n.internals.handleBounds||ir(n.handles),i=sr((o==null?void 0:o.source)??[],e.sourceHandle),s=sr(e.connectionMode===qe.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!i||!s)return(f=e.onError)==null||f.call(e,"008",Ee.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(i==null?void 0:i.position)||q.Bottom,u=(s==null?void 0:s.position)||q.Top,a=yt(t,i,l),d=yt(n,s,u);return{sourceX:a.x,sourceY:a.y,targetX:d.x,targetY:d.y,sourcePosition:l,targetPosition:u}}function ir(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function yt(e,t,n=q.Left,o=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:l}=t??Re(e);if(o)return{x:r+s/2,y:i+l/2};switch((t==null?void 0:t.position)??n){case q.Top:return{x:r+s/2,y:i};case q.Right:return{x:r+s,y:i+l/2};case q.Bottom:return{x:r+s/2,y:i+l};case q.Left:return{x:r,y:i+l/2}}}function sr(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function oo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`:""}function _f(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce((s,l)=>([l.markerStart||o,l.markerEnd||r].forEach(u=>{if(u&&typeof u=="object"){const a=oo(u,t);i.has(a)||(s.push({id:a,color:u.color||n,...u}),i.add(a))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}const xo={nodeOrigin:[0,0],nodeExtent:pt,elevateNodesOnSelect:!0,defaults:{}},Cf={...xo,checkEquality:!0};function vo(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Ef(e,t,n){const o=vo(xo,n);for(const r of e.values())if(r.parentId)So(r,e,t,o);else{const i=_t(r,o.nodeOrigin),s=Ke(r.extent)?r.extent:o.nodeExtent,l=Te(i,s,Re(r));r.internals.positionAbsolute=l}}function ro(e,t,n,o){var l,u;const r=vo(Cf,o),i=new Map(t),s=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const a of e){let d=i.get(a.id);if(r.checkEquality&&a===(d==null?void 0:d.internals.userNode))t.set(a.id,d);else{const f=_t(a,r.nodeOrigin),c=Ke(a.extent)?a.extent:r.nodeExtent,g=Te(f,c,Re(a));d={...r.defaults,...a,measured:{width:(l=a.measured)==null?void 0:l.width,height:(u=a.measured)==null?void 0:u.height},internals:{positionAbsolute:g,handleBounds:a.measured?d==null?void 0:d.internals.handleBounds:void 0,z:zi(a,s),userNode:a}},t.set(a.id,d)}a.parentId&&So(d,t,n,o)}}function Rf(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function So(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:s}=vo(xo,o),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Rf(e,n);const a=r?1e3:0,{x:d,y:f,z:c}=Mf(e,u,i,s,a),{positionAbsolute:g}=e.internals,h=d!==g.x||f!==g.y;(h||c!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:h?{x:d,y:f}:g,z:c})}function zi(e,t){return(he(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Mf(e,t,n,o,r){const{x:i,y:s}=t.internals.positionAbsolute,l=Re(e),u=_t(e,n),a=Ke(e.extent)?Te(u,e.extent,l):u;let d=Te({x:i+a.x,y:s+a.y},o,l);e.extent==="parent"&&(d=Mi(d,l,t));const f=zi(e,r),c=t.internals.z??0;return{x:d.x,y:d.y,z:c>f?c:f}}function _o(e,t,n,o=[0,0]){var s;const r=[],i=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const a=((s=i.get(l.parentId))==null?void 0:s.expandedRect)??Ue(u),d=Ii(a,l.rect);i.set(l.parentId,{expandedRect:d,parent:u})}return i.size>0&&i.forEach(({expandedRect:l,parent:u},a)=>{var y;const d=u.internals.positionAbsolute,f=Re(u),c=u.origin??o,g=l.x<d.x?Math.round(Math.abs(d.x-l.x)):0,h=l.y<d.y?Math.round(Math.abs(d.y-l.y)):0,p=Math.max(f.width,Math.round(l.width)),v=Math.max(f.height,Math.round(l.height)),m=(p-f.width)*c[0],S=(v-f.height)*c[1];(g>0||h>0||m||S)&&(r.push({id:a,type:"position",position:{x:u.position.x-g+m,y:u.position.y-h+S}}),(y=n.get(a))==null||y.forEach(x=>{e.some(E=>E.id===x.id)||r.push({id:x.id,type:"position",position:{x:x.position.x+g,y:x.position.y+h}})})),(f.width<l.width||f.height<l.height||g||h)&&r.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:p+(g?c[0]*g-m:0),height:v+(h?c[1]*h-S:0)}})}),r}function $f(e,t,n,o,r,i){const s=o==null?void 0:o.querySelector(".xyflow__viewport");let l=!1;if(!s)return{changes:[],updatedInternals:l};const u=[],a=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(a.transform),f=[];for(const c of e.values()){const g=t.get(c.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},l=!0;else{const h=an(c.nodeElement),p=g.measured.width!==h.width||g.measured.height!==h.height;if(!!(h.width&&h.height&&(p||!g.internals.handleBounds||c.force))){const m=c.nodeElement.getBoundingClientRect(),S=Ke(g.extent)?g.extent:i;let{positionAbsolute:y}=g.internals;g.parentId&&g.extent==="parent"?y=Mi(y,h,t.get(g.parentId)):S&&(y=Te(y,S,h)),g.measured=h,g.internals={...g.internals,positionAbsolute:y,handleBounds:{source:er("source",c.nodeElement,m,d,g.id),target:er("target",c.nodeElement,m,d,g.id)}},g.parentId&&So(g,t,n,{nodeOrigin:r}),l=!0,p&&(u.push({id:g.id,type:"dimensions",dimensions:h}),g.expandParent&&g.parentId&&f.push({id:g.id,parentId:g.parentId,rect:Ue(g,r)}))}}}if(f.length>0){const c=_o(f,t,n,r);u.push(...c)}return{changes:u,updatedInternals:l}}async function If({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),l=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(l)}function Ti(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:l=null}=o,u=`${r}-source-${s}`,a=`${i}-target-${l}`,d=e.get(u)||new Map,f=e.get(a)||new Map,c={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:l};t.set(o.id,o),e.set(u,d.set(`${i}-${l}`,c)),e.set(a,f.set(`${r}-${s}`,c))}}function Li(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Li(n,t):!1}function lr(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function bf(e,t,n,o){const r=new Map;for(const[i,s]of e)if((s.selected||s.id===o)&&(!s.parentId||!Li(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const l=e.get(i);l&&r.set(i,{id:i,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function Vn({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var s,l;const r=[];for(const[u,a]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&r.push({...d,position:a.position,dragging:o})}if(!e)return[r[0],r];const i=n.get(e).internals.userNode;return[{...i,position:((l=t.get(e))==null?void 0:l.position)||i.position,dragging:o},r]}function Nf({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},s=0,l=new Map,u=!1,a={x:0,y:0},d=null,f=!1,c=null,g=!1;function h({noDragClassName:v,handleSelector:m,domNode:S,isSelectable:y,nodeId:x,nodeClickDistance:E=0}){c=ue(S);function F({x:A,y:z},H){const{nodeLookup:k,nodeExtent:w,snapGrid:M,snapToGrid:_,nodeOrigin:I,onNodeDrag:C,onSelectionDrag:R,onError:D,updateNodePositions:T}=t();i={x:A,y:z};let L=!1,Y={x:0,y:0,x2:0,y2:0};if(l.size>1&&w){const O=Ct(l);Y=eo(O)}for(const[O,G]of l){if(!k.has(O))continue;let X={x:A-G.distance.x,y:z-G.distance.y};_&&(X=un(X,M));let K=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];if(l.size>1&&w&&!G.extent){const{positionAbsolute:J}=G.internals,Q=J.x-Y.x+w[0][0],j=J.x+G.measured.width-Y.x2+w[1][0],te=J.y-Y.y+w[0][1],ne=J.y+G.measured.height-Y.y2+w[1][1];K=[[Q,te],[j,ne]]}const{position:B,positionAbsolute:Z}=Ri({nodeId:O,nextPosition:X,nodeLookup:k,nodeExtent:K,nodeOrigin:I,onError:D});L=L||G.position.x!==B.x||G.position.y!==B.y,G.position=B,G.internals.positionAbsolute=Z}if(L&&(T(l,!0),H&&(o||C||!x&&R))){const[O,G]=Vn({nodeId:x,dragItems:l,nodeLookup:k});o==null||o(H,l,O,G),C==null||C(H,O,G),x||R==null||R(H,G)}}async function $(){if(!d)return;const{transform:A,panBy:z,autoPanSpeed:H}=t(),[k,w]=$i(a,d,H);(k!==0||w!==0)&&(i.x=(i.x??0)-k/A[2],i.y=(i.y??0)-w/A[2],await z({x:k,y:w})&&F(i,null)),s=requestAnimationFrame($)}function P(A){var L;const{nodeLookup:z,multiSelectionActive:H,nodesDraggable:k,transform:w,snapGrid:M,snapToGrid:_,selectNodesOnDrag:I,onNodeDragStart:C,onSelectionDragStart:R,unselectNodesAndEdges:D}=t();f=!0,(!I||!y)&&!H&&x&&((L=z.get(x))!=null&&L.selected||D()),y&&I&&x&&(e==null||e(x));const T=ut(A.sourceEvent,{transform:w,snapGrid:M,snapToGrid:_});if(i=T,l=bf(z,k,T,x),l.size>0&&(n||C||!x&&R)){const[Y,O]=Vn({nodeId:x,dragItems:l,nodeLookup:z});n==null||n(A.sourceEvent,l,Y,O),C==null||C(A.sourceEvent,Y,O),x||R==null||R(A.sourceEvent,O)}}const V=ri().clickDistance(E).on("start",A=>{const{domNode:z,nodeDragThreshold:H,transform:k,snapGrid:w,snapToGrid:M}=t();g=!1,H===0&&P(A),i=ut(A.sourceEvent,{transform:k,snapGrid:w,snapToGrid:M}),d=(z==null?void 0:z.getBoundingClientRect())||null,a=_e(A.sourceEvent,d)}).on("drag",A=>{const{autoPanOnNodeDrag:z,transform:H,snapGrid:k,snapToGrid:w,nodeDragThreshold:M,nodeLookup:_}=t(),I=ut(A.sourceEvent,{transform:H,snapGrid:k,snapToGrid:w});if((A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||x&&!_.has(x))&&(g=!0),!g){if(!u&&z&&f&&(u=!0,$()),!f){const C=I.xSnapped-(i.x??0),R=I.ySnapped-(i.y??0);Math.sqrt(C*C+R*R)>M&&P(A)}(i.x!==I.xSnapped||i.y!==I.ySnapped)&&l&&f&&(a=_e(A.sourceEvent,d),F(I,A.sourceEvent))}}).on("end",A=>{if(!(!f||g)&&(u=!1,f=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:z,updateNodePositions:H,onNodeDragStop:k,onSelectionDragStop:w}=t();if(H(l,!1),r||k||!x&&w){const[M,_]=Vn({nodeId:x,dragItems:l,nodeLookup:z,dragging:!1});r==null||r(A.sourceEvent,l,M,_),k==null||k(A.sourceEvent,M,_),x||w==null||w(A.sourceEvent,_)}}}).filter(A=>{const z=A.target;return!A.button&&(!v||!lr(z,`.${v}`,S))&&(!m||lr(z,m,S))});c.call(V)}function p(){c==null||c.on(".drag",null)}return{update:h,destroy:p}}function Pf(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())wt(r,Ue(i))>0&&o.push(i);return o}const Af=250;function Ff(e,t,n,o){var l,u;let r=[],i=1/0;const s=Pf(e,n,t+Af);for(const a of s){const d=[...((l=a.internals.handleBounds)==null?void 0:l.source)??[],...((u=a.internals.handleBounds)==null?void 0:u.target)??[]];for(const f of d){if(o.nodeId===f.nodeId&&o.type===f.type&&o.id===f.id)continue;const{x:c,y:g}=yt(a,f,f.position,!0),h=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(g-e.y,2));h>t||(h<i?(r=[{...f,x:c,y:g}],i=h):h===i&&r.push({...f,x:c,y:g}))}}if(!r.length)return null;if(r.length>1){const a=o.type==="source"?"target":"source";return r.find(d=>d.type===a)??r[0]}return r[0]}function Bi(e,t,n,o,r,i=!1){var a,d,f;const s=o.get(e);if(!s)return null;const l=r==="strict"?(a=s.internals.handleBounds)==null?void 0:a[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((f=s.internals.handleBounds)==null?void 0:f.target)??[]],u=(n?l==null?void 0:l.find(c=>c.id===n):l==null?void 0:l[0])??null;return u&&i?{...u,...yt(s,u,u.position,!0)}:u}function Oi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Vf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Gi=()=>!0;function kf(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:s,domNode:l,nodeLookup:u,lib:a,autoPanOnConnect:d,flowId:f,panBy:c,cancelConnection:g,onConnectStart:h,onConnect:p,onConnectEnd:v,isValidConnection:m=Gi,onReconnectEnd:S,updateConnection:y,getTransform:x,getFromHandle:E,autoPanSpeed:F}){const $=Ai(e.target);let P=0,V;const{x:A,y:z}=_e(e),H=$==null?void 0:$.elementFromPoint(A,z),k=Oi(i,H),w=l==null?void 0:l.getBoundingClientRect();if(!w||!k)return;const M=Bi(r,k,o,u,t);if(!M)return;let _=_e(e,w),I=!1,C=null,R=!1,D=null;function T(){if(!d||!w)return;const[Z,J]=$i(_,w,F);c({x:Z,y:J}),P=requestAnimationFrame(T)}const L={...M,nodeId:r,type:k,position:M.position},Y=u.get(r),G={inProgress:!0,isValid:null,from:yt(Y,L,q.Left,!0),fromHandle:L,fromPosition:L.position,fromNode:Y,to:_,toHandle:null,toPosition:Zo[L.position],toNode:null};y(G);let X=G;h==null||h(e,{nodeId:r,handleId:o,handleType:k});function K(Z){if(!E()||!L){B(Z);return}const J=x();_=_e(Z,w),V=Ff(Et(_,J,!1,[1,1]),n,u,L),I||(T(),I=!0);const Q=ji(Z,{handle:V,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:s?"target":"source",isValidConnection:m,doc:$,lib:a,flowId:f,nodeLookup:u});D=Q.handleDomNode,C=Q.connection,R=Vf(!!V,Q.isValid);const j={...X,isValid:R,to:V&&R?bi({x:V.x,y:V.y},J):_,toHandle:Q.toHandle,toPosition:R&&Q.toHandle?Q.toHandle.position:Zo[L.position],toNode:Q.toHandle?u.get(Q.toHandle.nodeId):null};R&&V&&X.toHandle&&j.toHandle&&X.toHandle.type===j.toHandle.type&&X.toHandle.nodeId===j.toHandle.nodeId&&X.toHandle.id===j.toHandle.id&&X.to.x===j.to.x&&X.to.y===j.to.y||(y(j),X=j)}function B(Z){(V||D)&&C&&R&&(p==null||p(C));const{inProgress:J,...Q}=X,j={...Q,toPosition:X.toHandle?X.toPosition:null};v==null||v(Z,j),i&&(S==null||S(Z,j)),g(),cancelAnimationFrame(P),I=!1,R=!1,C=null,D=null,$.removeEventListener("mousemove",K),$.removeEventListener("mouseup",B),$.removeEventListener("touchmove",K),$.removeEventListener("touchend",B)}$.addEventListener("mousemove",K),$.addEventListener("mouseup",B),$.addEventListener("touchmove",K),$.addEventListener("touchend",B)}function ji(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:l,flowId:u,isValidConnection:a=Gi,nodeLookup:d}){const f=i==="target",c=t?s.querySelector(`.${l}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:h}=_e(e),p=s.elementFromPoint(g,h),v=p!=null&&p.classList.contains(`${l}-flow__handle`)?p:c,m={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const S=Oi(void 0,v),y=v.getAttribute("data-nodeid"),x=v.getAttribute("data-handleid"),E=v.classList.contains("connectable"),F=v.classList.contains("connectableend");if(!y||!S)return m;const $={source:f?y:o,sourceHandle:f?x:r,target:f?o:y,targetHandle:f?r:x};m.connection=$;const V=E&&F&&(n===qe.Strict?f&&S==="source"||!f&&S==="target":y!==o||x!==r);m.isValid=V&&a($),m.toHandle=Bi(y,S,x,d,n,!1)}return m}const io={onPointerDown:kf,isValid:ji};function Df({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=ue(e);function i({translateExtent:l,width:u,height:a,zoomStep:d=10,pannable:f=!0,zoomable:c=!0,inversePan:g=!1}){const h=y=>{const x=n();if(y.sourceEvent.type!=="wheel"||!t)return;const E=-y.sourceEvent.deltaY*(y.sourceEvent.deltaMode===1?.05:y.sourceEvent.deltaMode?1:.002)*d,F=x[2]*Math.pow(2,E);t.scaleTo(F)};let p=[0,0];const v=y=>{(y.sourceEvent.type==="mousedown"||y.sourceEvent.type==="touchstart")&&(p=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY])},m=y=>{const x=n();if(y.sourceEvent.type!=="mousemove"&&y.sourceEvent.type!=="touchmove"||!t)return;const E=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY],F=[E[0]-p[0],E[1]-p[1]];p=E;const $=o()*Math.max(x[2],Math.log(x[2]))*(g?-1:1),P={x:x[0]-F[0]*$,y:x[1]-F[1]*$},V=[[0,0],[u,a]];t.setViewportConstrained({x:P.x,y:P.y,zoom:x[2]},V,l)},S=xi().on("start",v).on("zoom",f?m:null).on("zoom.wheel",c?h:null);r.call(S,{})}function s(){r.on("zoom",null)}return{update:i,destroy:s,pointer:fe}}const Hf=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,cn=e=>({x:e.x,y:e.y,zoom:e.k}),kn=({x:e,y:t,zoom:n})=>rn.translate(e,t).scale(n),Le=(e,t)=>e.target.closest(`.${t}`),Xi=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Dn=(e,t=0,n=()=>{})=>{const o=typeof t=="number"&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Yi=e=>{const t=e.ctrlKey&&Kt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function zf({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:a}){return d=>{if(Le(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(d.ctrlKey&&s){const v=fe(d),m=Yi(d),S=f*Math.pow(2,m);o.scaleTo(n,S,v,d);return}const c=d.deltaMode===1?20:1;let g=r===He.Vertical?0:d.deltaX*c,h=r===He.Horizontal?0:d.deltaY*c;!Kt()&&d.shiftKey&&r!==He.Vertical&&(g=d.deltaY*c,h=0),o.translateBy(n,-(g/f)*i,-(h/f)*i,{internal:!0});const p=cn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l==null||l(d,p)),e.isPanScrolling&&(u==null||u(d,p),e.panScrollTimeout=setTimeout(()=>{a==null||a(d,p),e.isPanScrolling=!1},150))}}function Tf({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){if(!t&&o.type==="wheel"&&!o.ctrlKey||Le(o,e))return null;o.preventDefault(),n.call(this,o,r)}}function Lf({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var i,s,l;if((i=o.sourceEvent)!=null&&i.internal)return;const r=cn(o.transform);e.mouseButton=((s=o.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((l=o.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,r))}}function Bf({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{var s,l;e.usedRightMouseButton=!!(n&&Xi(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!((l=i.sourceEvent)!=null&&l.internal)&&(r==null||r(i.sourceEvent,cn(i.transform)))}}function Of({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return s=>{var l;if(!((l=s.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,i&&Xi(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Hf(e.prevViewport,s.transform))){const u=cn(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,u)},n?150:0)}}}function Gf({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:l,noPanClassName:u,lib:a}){return d=>{var h;const f=e||t,c=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(Le(d,`${a}-flow__node`)||Le(d,`${a}-flow__edge`)))return!0;if(!o&&!f&&!r&&!i&&!n||s||Le(d,l)&&d.type==="wheel"||Le(d,u)&&(d.type!=="wheel"||r&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((h=d.touches)==null?void 0:h.length)>1)return d.preventDefault(),!1;if(!f&&!r&&!c&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;const g=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&g}}function jf({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:a}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),c=xi().clickDistance(!he(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),g=ue(e).call(c);y({x:i.x,y:i.y,zoom:We(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);const h=g.on("wheel.zoom"),p=g.on("dblclick.zoom");c.wheelDelta(Yi);function v(H,k){return g?new Promise(w=>{c==null||c.transform(Dn(g,k==null?void 0:k.duration,()=>w(!0)),H)}):Promise.resolve(!1)}function m({noWheelClassName:H,noPanClassName:k,onPaneContextMenu:w,userSelectionActive:M,panOnScroll:_,panOnDrag:I,panOnScrollMode:C,panOnScrollSpeed:R,preventScrolling:D,zoomOnPinch:T,zoomOnScroll:L,zoomOnDoubleClick:Y,zoomActivationKeyPressed:O,lib:G,onTransformChange:X}){M&&!d.isZoomingOrPanning&&S();const B=_&&!O&&!M?zf({zoomPanValues:d,noWheelClassName:H,d3Selection:g,d3Zoom:c,panOnScrollMode:C,panOnScrollSpeed:R,zoomOnPinch:T,onPanZoomStart:l,onPanZoom:s,onPanZoomEnd:u}):Tf({noWheelClassName:H,preventScrolling:D,d3ZoomHandler:h});if(g.on("wheel.zoom",B,{passive:!1}),!M){const J=Lf({zoomPanValues:d,onDraggingChange:a,onPanZoomStart:l});c.on("start",J);const Q=Bf({zoomPanValues:d,panOnDrag:I,onPaneContextMenu:!!w,onPanZoom:s,onTransformChange:X});c.on("zoom",Q);const j=Of({zoomPanValues:d,panOnDrag:I,panOnScroll:_,onPaneContextMenu:w,onPanZoomEnd:u,onDraggingChange:a});c.on("end",j)}const Z=Gf({zoomActivationKeyPressed:O,panOnDrag:I,zoomOnScroll:L,panOnScroll:_,zoomOnDoubleClick:Y,zoomOnPinch:T,userSelectionActive:M,noPanClassName:k,noWheelClassName:H,lib:G});c.filter(Z),Y?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function S(){c.on("zoom",null)}async function y(H,k,w){const M=kn(H),_=c==null?void 0:c.constrain()(M,k,w);return _&&await v(_),new Promise(I=>I(_))}async function x(H,k){const w=kn(H);return await v(w,k),new Promise(M=>M(w))}function E(H){if(g){const k=kn(H),w=g.property("__zoom");(w.k!==H.zoom||w.x!==H.x||w.y!==H.y)&&(c==null||c.transform(g,k,null,{sync:!0}))}}function F(){const H=g?yi(g.node()):{x:0,y:0,k:1};return{x:H.x,y:H.y,zoom:H.k}}function $(H,k){return g?new Promise(w=>{c==null||c.scaleTo(Dn(g,k==null?void 0:k.duration,()=>w(!0)),H)}):Promise.resolve(!1)}function P(H,k){return g?new Promise(w=>{c==null||c.scaleBy(Dn(g,k==null?void 0:k.duration,()=>w(!0)),H)}):Promise.resolve(!1)}function V(H){c==null||c.scaleExtent(H)}function A(H){c==null||c.translateExtent(H)}function z(H){const k=!he(H)||H<0?0:H;c==null||c.clickDistance(k)}return{update:m,destroy:S,setViewport:x,setViewportConstrained:y,getViewport:F,scaleTo:$,scaleBy:P,setScaleExtent:V,setTranslateExtent:A,syncViewport:E,setClickDistance:z}}var at;(function(e){e.Line="line",e.Handle="handle"})(at||(at={}));function Xf({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const s=e-t,l=n-o,u=[s>0?1:s<0?-1:0,l>0?1:l<0?-1:0];return s&&r&&(u[0]=u[0]*-1),l&&i&&(u[1]=u[1]*-1),u}function Yf(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function $e(e,t){return Math.max(0,t-e)}function Ie(e,t){return Math.max(0,e-t)}function kt(e,t,n){return Math.max(0,t-e,e-n)}function ur(e,t){return e?!t:t}function qf(e,t,n,o,r,i,s,l){let{affectsX:u,affectsY:a}=t;const{isHorizontal:d,isVertical:f}=t,c=d&&f,{xSnapped:g,ySnapped:h}=n,{minWidth:p,maxWidth:v,minHeight:m,maxHeight:S}=o,{x:y,y:x,width:E,height:F,aspectRatio:$}=e;let P=Math.floor(d?g-e.pointerX:0),V=Math.floor(f?h-e.pointerY:0);const A=E+(u?-P:P),z=F+(a?-V:V),H=-i[0]*E,k=-i[1]*F;let w=kt(A,p,v),M=kt(z,m,S);if(s){let C=0,R=0;u&&P<0?C=$e(y+P+H,s[0][0]):!u&&P>0&&(C=Ie(y+A+H,s[1][0])),a&&V<0?R=$e(x+V+k,s[0][1]):!a&&V>0&&(R=Ie(x+z+k,s[1][1])),w=Math.max(w,C),M=Math.max(M,R)}if(l){let C=0,R=0;u&&P>0?C=Ie(y+P,l[0][0]):!u&&P<0&&(C=$e(y+A,l[1][0])),a&&V>0?R=Ie(x+V,l[0][1]):!a&&V<0&&(R=$e(x+z,l[1][1])),w=Math.max(w,C),M=Math.max(M,R)}if(r){if(d){const C=kt(A/$,m,S)*$;if(w=Math.max(w,C),s){let R=0;!u&&!a||u&&!a&&c?R=Ie(x+k+A/$,s[1][1])*$:R=$e(x+k+(u?P:-P)/$,s[0][1])*$,w=Math.max(w,R)}if(l){let R=0;!u&&!a||u&&!a&&c?R=$e(x+A/$,l[1][1])*$:R=Ie(x+(u?P:-P)/$,l[0][1])*$,w=Math.max(w,R)}}if(f){const C=kt(z*$,p,v)/$;if(M=Math.max(M,C),s){let R=0;!u&&!a||a&&!u&&c?R=Ie(y+z*$+H,s[1][0])/$:R=$e(y+(a?V:-V)*$+H,s[0][0])/$,M=Math.max(M,R)}if(l){let R=0;!u&&!a||a&&!u&&c?R=$e(y+z*$,l[1][0])/$:R=Ie(y+(a?V:-V)*$,l[0][0])/$,M=Math.max(M,R)}}}V=V+(V<0?M:-M),P=P+(P<0?w:-w),r&&(c?A>z*$?V=(ur(u,a)?-P:P)/$:P=(ur(u,a)?-V:V)*$:d?(V=P/$,a=u):(P=V*$,u=a));const _=u?y+P:y,I=a?x+V:x;return{width:E+(u?-P:P),height:F+(a?-V:V),x:i[0]*P*(u?-1:1)+_,y:i[1]*V*(a?-1:1)+I}}const qi={width:0,height:0,x:0,y:0},Wf={...qi,pointerX:0,pointerY:0,aspectRatio:1};function Uf(e){return[[0,0],[e.measured.width,e.measured.height]]}function Kf(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,l=n[0]*i,u=n[1]*s;return[[o-l,r-u],[o+i-l,r+s-u]]}function Zf({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=ue(e);function s({controlPosition:u,boundaries:a,keepAspectRatio:d,onResizeStart:f,onResize:c,onResizeEnd:g,shouldResize:h}){let p={...qi},v={...Wf};const m=Yf(u);let S,y=[],x,E,F;const $=ri().on("start",P=>{const{nodeLookup:V,transform:A,snapGrid:z,snapToGrid:H,nodeOrigin:k}=n();if(S=V.get(t),!S)return;const{xSnapped:w,ySnapped:M}=ut(P.sourceEvent,{transform:A,snapGrid:z,snapToGrid:H});p={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},v={...p,pointerX:w,pointerY:M,aspectRatio:p.width/p.height},x=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(x=V.get(S.parentId),E=x&&S.extent==="parent"?Uf(x):void 0),y=[],F=void 0;for(const[_,I]of V)if(I.parentId===t&&(y.push({id:_,position:{...I.position},extent:I.extent}),I.extent==="parent"||I.expandParent)){const C=Kf(I,S,I.origin??k);F?F=[[Math.min(C[0][0],F[0][0]),Math.min(C[0][1],F[0][1])],[Math.max(C[1][0],F[1][0]),Math.max(C[1][1],F[1][1])]]:F=C}f==null||f(P,{...p})}).on("drag",P=>{const{transform:V,snapGrid:A,snapToGrid:z,nodeOrigin:H}=n(),k=ut(P.sourceEvent,{transform:V,snapGrid:A,snapToGrid:z}),w=[];if(!S)return;const{x:M,y:_,width:I,height:C}=p,R={},D=S.origin??H,{width:T,height:L,x:Y,y:O}=qf(v,m,k,a,d,D,E,F),G=T!==I,X=L!==C,K=Y!==M&&G,B=O!==_&&X;if(!K&&!B&&!G&&!X)return;if((K||B||D[0]===1||D[1]===1)&&(R.x=K?Y:p.x,R.y=B?O:p.y,p.x=R.x,p.y=R.y,y.length>0)){const j=Y-M,te=O-_;for(const ne of y)ne.position={x:ne.position.x-j+D[0]*(T-I),y:ne.position.y-te+D[1]*(L-C)},w.push(ne)}if((G||X)&&(R.width=G?T:p.width,R.height=X?L:p.height,p.width=R.width,p.height=R.height),x&&S.expandParent){const j=D[0]*(R.width??0);R.x&&R.x<j&&(p.x=j,v.x=v.x-(R.x-j));const te=D[1]*(R.height??0);R.y&&R.y<te&&(p.y=te,v.y=v.y-(R.y-te))}const Z=Xf({width:p.width,prevWidth:I,height:p.height,prevHeight:C,affectsX:m.affectsX,affectsY:m.affectsY}),J={...p,direction:Z};(h==null?void 0:h(P,J))!==!1&&(c==null||c(P,J),o(R,w))}).on("end",P=>{g==null||g(P,{...p}),r==null||r()});i.call($)}function l(){i.on(".drag",null)}return{update:s,destroy:l}}var Wi={exports:{}},Ui={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dn=N,Qf=Ll;function Jf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eg=typeof Object.is=="function"?Object.is:Jf,tg=Qf.useSyncExternalStore,ng=dn.useRef,og=dn.useEffect,rg=dn.useMemo,ig=dn.useDebugValue;Ui.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=ng(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=rg(function(){function u(g){if(!a){if(a=!0,d=g,g=o(g),r!==void 0&&s.hasValue){var h=s.value;if(r(h,g))return f=h}return f=g}if(h=f,eg(d,g))return h;var p=o(g);return r!==void 0&&r(h,p)?h:(d=g,f=p)}var a=!1,d,f,c=n===void 0?null:n;return[function(){return u(t())},c===null?void 0:function(){return u(c())}]},[t,n,o,r]);var l=tg(e,i[0],i[1]);return og(function(){s.hasValue=!0,s.value=l},[l]),ig(l),l};Wi.exports=Ui;var sg=Wi.exports;const lg=bl(sg),ug={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://regnxtengined.azurewebsites.net",VITE_FAST_API_BACKEND:"http://127.0.0.1:8000"},ar=e=>{let t;const n=new Set,o=(d,f)=>{const c=typeof d=="function"?d(t):d;if(!Object.is(c,t)){const g=t;t=f??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(h=>h(t,g))}},r=()=>t,u={setState:o,getState:r,getInitialState:()=>a,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(ug?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,u);return u},ag=e=>e?ar(e):ar,{useDebugValue:cg}=Nl,{useSyncExternalStoreWithSelector:dg}=lg,fg=e=>e;function Ki(e,t=fg,n){const o=dg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return cg(o),o}const cr=(e,t)=>{const n=ag(e),o=(r,i=t)=>Ki(n,r,i);return Object.assign(o,n),o},gg=(e,t)=>e?cr(e,t):cr;function re(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const fn=N.createContext(null),hg=fn.Provider,Zi=Ee.error001();function ee(e,t){const n=N.useContext(fn);if(n===null)throw new Error(Zi);return Ki(n,e,t)}function oe(){const e=N.useContext(fn);if(e===null)throw new Error(Zi);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const dr={display:"none"},pg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Qi="react-flow__node-desc",Ji="react-flow__edge-desc",mg="react-flow__aria-live",wg=e=>e.ariaLiveMessage;function yg({rfId:e}){const t=ee(wg);return b.jsx("div",{id:`${mg}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:pg,children:t})}function xg({rfId:e,disableKeyboardA11y:t}){return b.jsxs(b.Fragment,{children:[b.jsxs("div",{id:`${Qi}-${e}`,style:dr,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),b.jsx("div",{id:`${Ji}-${e}`,style:dr,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&b.jsx(yg,{rfId:e})]})}const vg=e=>e.userSelectionActive?"none":"all";function Co({position:e="top-left",children:t,className:n,style:o,...r}){const i=ee(vg),s=`${e}`.split("-");return b.jsx("div",{className:ie(["react-flow__panel",n,...s]),style:{...o,pointerEvents:i},...r,children:t})}function Sg({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:b.jsx(Co,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:b.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const _g=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Dt=e=>e.id;function Cg(e,t){return re(e.selectedNodes.map(Dt),t.selectedNodes.map(Dt))&&re(e.selectedEdges.map(Dt),t.selectedEdges.map(Dt))}function Eg({onSelectionChange:e}){const t=oe(),{selectedNodes:n,selectedEdges:o}=ee(_g,Cg);return N.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChangeHandlers.forEach(i=>i(r))},[n,o,e]),null}const Rg=e=>!!e.onSelectionChangeHandlers;function Mg({onSelectionChange:e}){const t=ee(Rg);return e||t?b.jsx(Eg,{onSelectionChange:e}):null}const es=[0,0],$g={x:0,y:0,zoom:1},Ig=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],fr=[...Ig,"rfId"],bg=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),gr={translateExtent:pt,nodeOrigin:es,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Ng(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:s,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:a}=ee(bg,re),d=oe();N.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{f.current=gr,l()}),[]);const f=N.useRef(gr);return N.useEffect(()=>{for(const c of fr){const g=e[c],h=f.current[c];g!==h&&(typeof e[c]>"u"||(c==="nodes"?t(g):c==="edges"?n(g):c==="minZoom"?o(g):c==="maxZoom"?r(g):c==="translateExtent"?i(g):c==="nodeExtent"?s(g):c==="paneClickDistance"?a(g):c==="fitView"?d.setState({fitViewOnInit:g}):c==="fitViewOptions"?d.setState({fitViewOnInitOptions:g}):d.setState({[c]:g})))}f.current=e},fr.map(c=>e[c])),null}function hr(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Pg(e){var o;const[t,n]=N.useState(e==="system"?null:e);return N.useEffect(()=>{if(e!=="system"){n(e);return}const r=hr(),i=()=>n(r!=null&&r.matches?"dark":"light");return i(),r==null||r.addEventListener("change",i),()=>{r==null||r.removeEventListener("change",i)}},[e]),t!==null?t:(o=hr())!=null&&o.matches?"dark":"light"}const pr=typeof document<"u"?document:null;function xt(e=null,t={target:pr,actInsideInputWithModifier:!0}){const[n,o]=N.useState(!1),r=N.useRef(!1),i=N.useRef(new Set([])),[s,l]=N.useMemo(()=>{if(e!==null){const a=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=a.reduce((f,c)=>f.concat(...c),[]);return[a,d]}return[[],[]]},[e]);return N.useEffect(()=>{const u=(t==null?void 0:t.target)||pr;if(e!==null){const a=c=>{if(r.current=c.ctrlKey||c.metaKey||c.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&to(c))return!1;const h=wr(c.code,l);i.current.add(c[h]),mr(s,i.current,!1)&&(c.preventDefault(),o(!0))},d=c=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&to(c))return!1;const h=wr(c.code,l);mr(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(c[h]),c.key==="Meta"&&i.current.clear(),r.current=!1},f=()=>{i.current.clear(),o(!1)};return u==null||u.addEventListener("keydown",a),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{u==null||u.removeEventListener("keydown",a),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,o]),n}function mr(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function wr(e,t){return t.includes(e)?"code":"key"}const Ag=()=>{const e=oe();return N.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const l=Qn(n,t),{width:u,height:a}=an(s);return Jn({nodes:l,width:u,height:a,minZoom:o,maxZoom:r,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:s,panZoom:l}=e.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:s,a=r/2-t*u,d=i/2-n*u;return l?(await l.setViewport({x:a,y:d,zoom:u},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:s,panZoom:l}=e.getState(),u=yo(t,o,r,i,s,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(u,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:i}=e.getState();if(!i)return t;const{x:s,y:l}=i.getBoundingClientRect(),u={x:t.x-s,y:t.y-l};return Et(u,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),s=bi(t,n);return{x:s.x+r,y:s.y+i}}}),[])};function ts(e,t){const n=[],o=new Map,r=[];for(const i of e)if(i.type==="add"){r.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const s=o.get(i.id);s?s.push(i):o.set(i.id,[i])}for(const i of t){const s=o.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const l={...i};for(const u of s)Fg(u,l);n.push(l)}return r.length&&r.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Fg(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Vg(e,t){return ts(e,t)}function kg(e,t){return ts(e,t)}function Ve(e,t){return{id:e,type:"select",selected:t}}function Be(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(Ve(i.id,s)))}return o}function yr({items:e=[],lookup:t}){var r;const n=[],o=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const l=t.get(s.id),u=((r=l==null?void 0:l.internals)==null?void 0:r.userNode)??l;u!==void 0&&u!==s&&n.push({id:s.id,item:s,type:"replace"}),u===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function xr(e){return{id:e.id,type:"remove"}}const vr=e=>lf(e),Dg=e=>Ci(e);function ns(e){return N.forwardRef(e)}const Hg=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Sr(e){const[t,n]=N.useState(!1),[o]=N.useState(()=>zg(()=>n(!0)));return Hg(()=>{if(!t){o.reset();return}const r=o.get();r.length&&(e(r),o.reset()),n(!1)},[t]),o}function zg(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const os=N.createContext(null);function Tg({children:e}){const t=oe(),n=N.useCallback(l=>{const{nodes:u=[],setNodes:a,hasDefaultNodes:d,onNodesChange:f,nodeLookup:c}=t.getState();let g=u;for(const h of l)g=typeof h=="function"?h(g):h;d?a(g):f&&f(yr({items:g,lookup:c}))},[]),o=Sr(n),r=N.useCallback(l=>{const{edges:u=[],setEdges:a,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:c}=t.getState();let g=u;for(const h of l)g=typeof h=="function"?h(g):h;d?a(g):f&&f(yr({items:g,lookup:c}))},[]),i=Sr(r),s=N.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return b.jsx(os.Provider,{value:s,children:e})}function Lg(){const e=N.useContext(os);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Bg=e=>!!e.panZoom;function Eo(){const e=Ag(),t=oe(),n=Lg(),o=ee(Bg),r=N.useMemo(()=>{const i=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},l=f=>{n.edgeQueue.push(f)},u=f=>{var m,S;const{nodeLookup:c,nodeOrigin:g}=t.getState(),h=vr(f)?f:c.get(f.id),p=h.parentId?Pi(h.position,h.measured,h.parentId,c,g):h.position,v={id:h.id,position:p,width:((m=h.measured)==null?void 0:m.width)??h.width,height:((S=h.measured)==null?void 0:S.height)??h.height,data:h.data};return Ue(v)},a=(f,c,g={replace:!1})=>{s(h=>h.map(p=>{if(p.id===f){const v=typeof c=="function"?c(p):c;return g.replace&&vr(v)?v:{...p,...v}}return p}))},d=(f,c,g={replace:!1})=>{l(h=>h.map(p=>{if(p.id===f){const v=typeof c=="function"?c(p):c;return g.replace&&Dg(v)?v:{...p,...v}}return p}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var c;return(c=i(f))==null?void 0:c.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(c=>({...c}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:l,addNodes:f=>{const c=Array.isArray(f)?f:[f];n.nodeQueue.push(g=>[...g,...c])},addEdges:f=>{const c=Array.isArray(f)?f:[f];n.edgeQueue.push(g=>[...g,...c])},toObject:()=>{const{nodes:f=[],edges:c=[],transform:g}=t.getState(),[h,p,v]=g;return{nodes:f.map(m=>({...m})),edges:c.map(m=>({...m})),viewport:{x:h,y:p,zoom:v}}},deleteElements:async({nodes:f=[],edges:c=[]})=>{const{nodes:g,edges:h,onNodesDelete:p,onEdgesDelete:v,triggerNodeChanges:m,triggerEdgeChanges:S,onDelete:y,onBeforeDelete:x}=t.getState(),{nodes:E,edges:F}=await cf({nodesToRemove:f,edgesToRemove:c,nodes:g,edges:h,onBeforeDelete:x}),$=F.length>0,P=E.length>0;if($){const V=F.map(xr);v==null||v(F),S(V)}if(P){const V=E.map(xr);p==null||p(E),m(V)}return(P||$)&&(y==null||y({nodes:E,edges:F})),{deletedNodes:E,deletedEdges:F}},getIntersectingNodes:(f,c=!0,g)=>{const h=Jo(f),p=h?f:u(f),v=g!==void 0;return p?(g||t.getState().nodes).filter(m=>{const S=t.getState().nodeLookup.get(m.id);if(S&&!h&&(m.id===f.id||!S.internals.positionAbsolute))return!1;const y=Ue(v?m:S),x=wt(y,p);return c&&x>0||x>=p.width*p.height}):[]},isNodeIntersecting:(f,c,g=!0)=>{const p=Jo(f)?f:u(f);if(!p)return!1;const v=wt(p,c);return g&&v>0||v>=p.width*p.height},updateNode:a,updateNodeData:(f,c,g={replace:!1})=>{a(f,h=>{const p=typeof c=="function"?c(h):c;return g.replace?{...h,data:p}:{...h,data:{...h.data,...p}}},g)},updateEdge:d,updateEdgeData:(f,c,g={replace:!1})=>{d(f,h=>{const p=typeof c=="function"?c(h):c;return g.replace?{...h,data:p}:{...h,data:{...h.data,...p}}},g)},getNodesBounds:f=>{const{nodeLookup:c,nodeOrigin:g}=t.getState();return uf(f,{nodeLookup:c,nodeOrigin:g})},getHandleConnections:({type:f,id:c,nodeId:g})=>{var h;return Array.from(((h=t.getState().connectionLookup.get(`${g}-${f}-${c??null}`))==null?void 0:h.values())??[])}}},[]);return N.useMemo(()=>({...r,...e,viewportInitialized:o}),[o])}const _r=e=>e.selected,Og={actInsideInputWithModifier:!1},Gg=typeof window<"u"?window:void 0;function jg({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=oe(),{deleteElements:o}=Eo(),r=xt(e,Og),i=xt(t,{target:Gg});N.useEffect(()=>{if(r){const{edges:s,nodes:l}=n.getState();o({nodes:l.filter(_r),edges:s.filter(_r)}),n.setState({nodesSelectionActive:!1})}},[r]),N.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function Xg(e){const t=oe();N.useEffect(()=>{const n=()=>{var r,i;if(!e.current)return!1;const o=an(e.current);(o.height===0||o.width===0)&&((i=(r=t.getState()).onError)==null||i.call(r,"004",Ee.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const gn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Yg=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function qg({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=He.Free,zoomOnDoubleClick:s=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:a,minZoom:d,maxZoom:f,zoomActivationKeyCode:c,preventScrolling:g=!0,children:h,noWheelClassName:p,noPanClassName:v,onViewportChange:m,isControlledViewport:S,paneClickDistance:y}){const x=oe(),E=N.useRef(null),{userSelectionActive:F,lib:$}=ee(Yg,re),P=xt(c),V=N.useRef();Xg(E);const A=N.useCallback(z=>{m==null||m({x:z[0],y:z[1],zoom:z[2]}),S||x.setState({transform:z})},[m,S]);return N.useEffect(()=>{if(E.current){V.current=jf({domNode:E.current,minZoom:d,maxZoom:f,translateExtent:a,viewport:u,paneClickDistance:y,onDraggingChange:w=>x.setState({paneDragging:w}),onPanZoomStart:(w,M)=>{const{onViewportChangeStart:_,onMoveStart:I}=x.getState();I==null||I(w,M),_==null||_(M)},onPanZoom:(w,M)=>{const{onViewportChange:_,onMove:I}=x.getState();I==null||I(w,M),_==null||_(M)},onPanZoomEnd:(w,M)=>{const{onViewportChangeEnd:_,onMoveEnd:I}=x.getState();I==null||I(w,M),_==null||_(M)}});const{x:z,y:H,zoom:k}=V.current.getViewport();return x.setState({panZoom:V.current,transform:[z,H,k],domNode:E.current.closest(".react-flow")}),()=>{var w;(w=V.current)==null||w.destroy()}}},[]),N.useEffect(()=>{var z;(z=V.current)==null||z.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:g,noPanClassName:v,userSelectionActive:F,noWheelClassName:p,lib:$,onTransformChange:A})},[e,t,n,o,r,i,s,l,P,g,v,F,p,$,A]),b.jsx("div",{className:"react-flow__renderer",ref:E,style:gn,children:h})}const Wg=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ug(){const{userSelectionActive:e,userSelectionRect:t}=ee(Wg,re);return e&&t?b.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Hn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Kg=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Zg({isSelecting:e,selectionKeyPressed:t,selectionMode:n=mt.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:a,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:c,children:g}){const h=N.useRef(null),p=oe(),v=N.useRef(0),m=N.useRef(0),S=N.useRef(),y=N.useRef(new Map),{userSelectionActive:x,elementsSelectable:E,dragging:F}=ee(Kg,re),$=E&&(e||x),P=N.useRef(!1),V=N.useRef(!1),A=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,m.current=0},z=C=>{if(P.current){P.current=!1;return}l==null||l(C),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},H=C=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){C.preventDefault();return}u==null||u(C)},k=a?C=>a(C):void 0,w=C=>{var O,G,X,K;const{resetSelectedElements:R,domNode:D,edgeLookup:T}=p.getState();if(S.current=D==null?void 0:D.getBoundingClientRect(),!E||!e||C.button!==0||C.target!==h.current||!S.current)return;(G=(O=C.target)==null?void 0:O.setPointerCapture)==null||G.call(O,C.pointerId),V.current=!0,P.current=!1,y.current=new Map;for(const[B,Z]of T)y.current.set(Z.source,((X=y.current.get(Z.source))==null?void 0:X.add(B))||new Set([B])),y.current.set(Z.target,((K=y.current.get(Z.target))==null?void 0:K.add(B))||new Set([B]));const{x:L,y:Y}=_e(C.nativeEvent,S.current);R(),p.setState({userSelectionRect:{width:0,height:0,startX:L,startY:Y,x:L,y:Y}}),i==null||i(C)},M=C=>{const{userSelectionRect:R,edgeLookup:D,transform:T,nodeLookup:L,triggerNodeChanges:Y,triggerEdgeChanges:O}=p.getState();if(!S.current||!R)return;P.current=!0;const{x:G,y:X}=_e(C.nativeEvent,S.current),{startX:K,startY:B}=R,Z={startX:K,startY:B,x:G<K?G:K,y:X<B?X:B,width:Math.abs(G-K),height:Math.abs(X-B)},J=Ei(L,Z,T,n===mt.Partial,!0),Q=new Set,j=new Set;for(const te of J){j.add(te.id);const ne=y.current.get(te.id);if(ne)for(const de of ne)Q.add(de)}if(v.current!==j.size){v.current=j.size;const te=Be(L,j,!0);Y(te)}if(m.current!==Q.size){m.current=Q.size;const te=Be(D,Q);O(te)}p.setState({userSelectionRect:Z,userSelectionActive:!0,nodesSelectionActive:!1})},_=C=>{var D,T;if(C.button!==0||!V.current)return;(T=(D=C.target)==null?void 0:D.releasePointerCapture)==null||T.call(D,C.pointerId);const{userSelectionRect:R}=p.getState();!x&&R&&C.target===h.current&&(z==null||z(C)),v.current>0&&p.setState({nodesSelectionActive:!0}),A(),s==null||s(C),(t||r)&&(P.current=!1),V.current=!1},I=o===!0||Array.isArray(o)&&o.includes(0);return b.jsxs("div",{className:ie(["react-flow__pane",{draggable:I,dragging:F,selection:e}]),onClick:$?void 0:Hn(z,h),onContextMenu:Hn(H,h),onWheel:Hn(k,h),onPointerEnter:$?void 0:d,onPointerDown:$?w:f,onPointerMove:$?M:f,onPointerUp:$?_:void 0,onPointerLeave:c,ref:h,style:gn,children:[g,b.jsx(Ug,{})]})}function so({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:l,onError:u}=t.getState(),a=l.get(e);if(!a){u==null||u("012",Ee.error012(e));return}t.setState({nodesSelectionActive:!1}),a.selected?(n||a.selected&&s)&&(i({nodes:[a],edges:[]}),requestAnimationFrame(()=>{var d;return(d=o==null?void 0:o.current)==null?void 0:d.blur()})):r([e])}function rs({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:s}){const l=oe(),[u,a]=N.useState(!1),d=N.useRef();return N.useEffect(()=>{d.current=Nf({getStoreItems:()=>l.getState(),onNodeMouseDown:f=>{so({id:f,store:l,nodeRef:e})},onDragStart:()=>{a(!0)},onDragStop:()=>{a(!1)}})},[]),N.useEffect(()=>{var f,c;if(t)(f=d.current)==null||f.destroy();else if(e.current)return(c=d.current)==null||c.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:s}),()=>{var g;(g=d.current)==null||g.destroy()}},[n,o,t,i,e,r]),u}const Qg=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function is(){const e=oe();return N.useCallback(n=>{const{nodeExtent:o,snapToGrid:r,snapGrid:i,nodesDraggable:s,onError:l,updateNodePositions:u,nodeLookup:a,nodeOrigin:d}=e.getState(),f=new Map,c=Qg(s),g=r?i[0]:5,h=r?i[1]:5,p=n.direction.x*g*n.factor,v=n.direction.y*h*n.factor;for(const[,m]of a){if(!c(m))continue;let S={x:m.internals.positionAbsolute.x+p,y:m.internals.positionAbsolute.y+v};r&&(S=un(S,i));const{position:y,positionAbsolute:x}=Ri({nodeId:m.id,nextPosition:S,nodeLookup:a,nodeExtent:o,nodeOrigin:d,onError:l});m.position=y,m.internals.positionAbsolute=x,f.set(m.id,m)}u(f)},[])}const Ro=N.createContext(null),Jg=Ro.Provider;Ro.Consumer;const ss=()=>N.useContext(Ro),eh=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),th=(e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:s}=o,{fromHandle:l,toHandle:u,isValid:a}=s,d=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:d,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.id)===t&&(r==null?void 0:r.type)===n,isPossibleEndHandle:i===qe.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,valid:d&&a}};function nh({type:e="source",position:t=q.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:l,children:u,className:a,onMouseDown:d,onTouchStart:f,...c},g){var w,M;const h=s||null,p=e==="target",v=oe(),m=ss(),{connectOnClick:S,noPanClassName:y,rfId:x}=ee(eh,re),{connectingFrom:E,connectingTo:F,clickConnecting:$,isPossibleEndHandle:P,connectionInProcess:V,valid:A}=ee(th(m,h,e),re);m||(M=(w=v.getState()).onError)==null||M.call(w,"010",Ee.error010());const z=_=>{const{defaultEdgeOptions:I,onConnect:C,hasDefaultEdges:R}=v.getState(),D={...I,..._};if(R){const{edges:T,setEdges:L}=v.getState();L(wf(D,T))}C==null||C(D),l==null||l(D)},H=_=>{if(!m)return;const I=Fi(_.nativeEvent);if(r&&(I&&_.button===0||!I)){const C=v.getState();io.onPointerDown(_.nativeEvent,{autoPanOnConnect:C.autoPanOnConnect,connectionMode:C.connectionMode,connectionRadius:C.connectionRadius,domNode:C.domNode,nodeLookup:C.nodeLookup,lib:C.lib,isTarget:p,handleId:h,nodeId:m,flowId:C.rfId,panBy:C.panBy,cancelConnection:C.cancelConnection,onConnectStart:C.onConnectStart,onConnectEnd:C.onConnectEnd,updateConnection:C.updateConnection,onConnect:z,isValidConnection:n||C.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:C.autoPanSpeed})}I?d==null||d(_):f==null||f(_)},k=_=>{const{onClickConnectStart:I,onClickConnectEnd:C,connectionClickStartHandle:R,connectionMode:D,isValidConnection:T,lib:L,rfId:Y,nodeLookup:O,connection:G}=v.getState();if(!m||!R&&!r)return;if(!R){I==null||I(_.nativeEvent,{nodeId:m,handleId:h,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:m,type:e,id:h}});return}const X=Ai(_.target),K=n||T,{connection:B,isValid:Z}=io.isValid(_.nativeEvent,{handle:{nodeId:m,id:h,type:e},connectionMode:D,fromNodeId:R.nodeId,fromHandleId:R.id||null,fromType:R.type,isValidConnection:K,flowId:Y,doc:X,lib:L,nodeLookup:O});Z&&B&&z(B);const J=structuredClone(G);delete J.inProgress,J.toPosition=J.toHandle?J.toHandle.position:null,C==null||C(_,J),v.setState({connectionClickStartHandle:null})};return b.jsx("div",{"data-handleid":h,"data-nodeid":m,"data-handlepos":t,"data-id":`${x}-${m}-${h}-${e}`,className:ie(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",y,a,{source:!p,target:p,connectable:o,connectablestart:r,connectableend:i,clickconnecting:$,connectingfrom:E,connectingto:F,valid:A,connectionindicator:o&&(!V||P)&&(V?i:r)}]),onMouseDown:H,onTouchStart:H,onClick:S?k:void 0,ref:g,...c,children:u})}const Zt=N.memo(ns(nh));function oh({data:e,isConnectable:t,sourcePosition:n=q.Bottom}){return b.jsxs(b.Fragment,{children:[e==null?void 0:e.label,b.jsx(Zt,{type:"source",position:n,isConnectable:t})]})}function rh({data:e,isConnectable:t,targetPosition:n=q.Top,sourcePosition:o=q.Bottom}){return b.jsxs(b.Fragment,{children:[b.jsx(Zt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,b.jsx(Zt,{type:"source",position:o,isConnectable:t})]})}function ih(){return null}function sh({data:e,isConnectable:t,targetPosition:n=q.Top}){return b.jsxs(b.Fragment,{children:[b.jsx(Zt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Qt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Cr={input:oh,default:rh,output:sh,group:ih};function lh(e){var t,n,o,r;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((r=e.style)==null?void 0:r.height)}}const uh=e=>{const{width:t,height:n,x:o,y:r}=Ct(e.nodeLookup,{filter:i=>!!i.selected});return{width:he(t)?t:null,height:he(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function ah({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=oe(),{width:r,height:i,transformString:s,userSelectionActive:l}=ee(uh,re),u=is(),a=N.useRef(null);if(N.useEffect(()=>{var c;n||(c=a.current)==null||c.focus({preventScroll:!0})},[n]),rs({nodeRef:a}),l||!r||!i)return null;const d=e?c=>{const g=o.getState().nodes.filter(h=>h.selected);e(c,g)}:void 0,f=c=>{Object.prototype.hasOwnProperty.call(Qt,c.key)&&u({direction:Qt[c.key],factor:c.shiftKey?4:1})};return b.jsx("div",{className:ie(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:b.jsx("div",{ref:a,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:r,height:i}})})}const Er=typeof window<"u"?window:void 0,ch=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ls({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:a,selectionOnDrag:d,selectionMode:f,onSelectionStart:c,onSelectionEnd:g,multiSelectionKeyCode:h,panActivationKeyCode:p,zoomActivationKeyCode:v,elementsSelectable:m,zoomOnScroll:S,zoomOnPinch:y,panOnScroll:x,panOnScrollSpeed:E,panOnScrollMode:F,zoomOnDoubleClick:$,panOnDrag:P,defaultViewport:V,translateExtent:A,minZoom:z,maxZoom:H,preventScrolling:k,onSelectionContextMenu:w,noWheelClassName:M,noPanClassName:_,disableKeyboardA11y:I,onViewportChange:C,isControlledViewport:R}){const{nodesSelectionActive:D,userSelectionActive:T}=ee(ch),L=xt(a,{target:Er}),Y=xt(p,{target:Er}),O=Y||P,G=Y||x,X=d&&O!==!0,K=L||T||X;return jg({deleteKeyCode:u,multiSelectionKeyCode:h}),b.jsx(qg,{onPaneContextMenu:i,elementsSelectable:m,zoomOnScroll:S,zoomOnPinch:y,panOnScroll:G,panOnScrollSpeed:E,panOnScrollMode:F,zoomOnDoubleClick:$,panOnDrag:!L&&O,defaultViewport:V,translateExtent:A,minZoom:z,maxZoom:H,zoomActivationKeyCode:v,preventScrolling:k,noWheelClassName:M,noPanClassName:_,onViewportChange:C,isControlledViewport:R,paneClickDistance:l,children:b.jsxs(Zg,{onSelectionStart:c,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:O,isSelecting:!!K,selectionMode:f,selectionKeyPressed:L,selectionOnDrag:X,children:[e,D&&b.jsx(ah,{onSelectionContextMenu:w,noPanClassName:_,disableKeyboardA11y:I})]})})}ls.displayName="FlowRenderer";const dh=N.memo(ls),fh=e=>t=>e?Ei(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function gh(e){return ee(N.useCallback(fh(e),[e]),re)}const hh=e=>e.updateNodeInternals;function ph(){const e=ee(hh),[t]=N.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const i=r.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:r.target,force:!0})}),e(o)}));return N.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function mh({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=oe(),i=N.useRef(null),s=N.useRef(null),l=N.useRef(e.sourcePosition),u=N.useRef(e.targetPosition),a=N.useRef(t),d=n&&!!e.internals.handleBounds;return N.useEffect(()=>{i.current&&!e.hidden&&(!d||s.current!==i.current)&&(s.current&&(o==null||o.unobserve(s.current)),o==null||o.observe(i.current),s.current=i.current)},[d,e.hidden]),N.useEffect(()=>()=>{s.current&&(o==null||o.unobserve(s.current),s.current=null)},[]),N.useEffect(()=>{if(i.current){const f=a.current!==t,c=l.current!==e.sourcePosition,g=u.current!==e.targetPosition;(f||c||g)&&(a.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function wh({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:s,nodesDraggable:l,elementsSelectable:u,nodesConnectable:a,nodesFocusable:d,resizeObserver:f,noDragClassName:c,noPanClassName:g,disableKeyboardA11y:h,rfId:p,nodeTypes:v,nodeExtent:m,nodeClickDistance:S,onError:y}){const{node:x,internals:E,isParent:F}=ee(B=>{const Z=B.nodeLookup.get(e),J=B.parentLookup.has(e);return{node:Z,internals:Z.internals,isParent:J}},re);let $=x.type||"default",P=(v==null?void 0:v[$])||Cr[$];P===void 0&&(y==null||y("003",Ee.error003($)),$="default",P=Cr.default);const V=!!(x.draggable||l&&typeof x.draggable>"u"),A=!!(x.selectable||u&&typeof x.selectable>"u"),z=!!(x.connectable||a&&typeof x.connectable>"u"),H=!!(x.focusable||d&&typeof x.focusable>"u"),k=oe(),w=Ni(x),M=mh({node:x,nodeType:$,hasDimensions:w,resizeObserver:f}),_=rs({nodeRef:M,disabled:x.hidden||!V,noDragClassName:c,handleSelector:x.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:S}),I=is();if(x.hidden)return null;const C=Re(x),R=lh(x),D=A||V||t||n||o||r,T=n?B=>n(B,{...E.userNode}):void 0,L=o?B=>o(B,{...E.userNode}):void 0,Y=r?B=>r(B,{...E.userNode}):void 0,O=i?B=>i(B,{...E.userNode}):void 0,G=s?B=>s(B,{...E.userNode}):void 0,X=B=>{const{selectNodesOnDrag:Z,nodeDragThreshold:J}=k.getState();A&&(!Z||!V||J>0)&&so({id:e,store:k,nodeRef:M}),t&&t(B,{...E.userNode})},K=B=>{if(!(to(B.nativeEvent)||h))if(vi.includes(B.key)&&A){const Z=B.key==="Escape";so({id:e,store:k,unselect:Z,nodeRef:M})}else V&&x.selected&&Object.prototype.hasOwnProperty.call(Qt,B.key)&&(k.setState({ariaLiveMessage:`Moved selected node ${B.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~E.positionAbsolute.x}, y: ${~~E.positionAbsolute.y}`}),I({direction:Qt[B.key],factor:B.shiftKey?4:1}))};return b.jsx("div",{className:ie(["react-flow__node",`react-flow__node-${$}`,{[g]:V},x.className,{selected:x.selected,selectable:A,parent:F,draggable:V,dragging:_}]),ref:M,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:D?"all":"none",visibility:w?"visible":"hidden",...x.style,...R},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:T,onMouseMove:L,onMouseLeave:Y,onContextMenu:O,onClick:X,onDoubleClick:G,onKeyDown:H?K:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"aria-describedby":h?void 0:`${Qi}-${p}`,"aria-label":x.ariaLabel,children:b.jsx(Jg,{value:e,children:b.jsx(P,{id:e,data:x.data,type:$,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:x.selected,selectable:A,draggable:V,deletable:x.deletable??!0,isConnectable:z,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:_,dragHandle:x.dragHandle,zIndex:E.z,parentId:x.parentId,...C})})})}const yh=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function us(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:i}=ee(yh,re),s=gh(e.onlyRenderVisibleElements),l=ph();return b.jsx("div",{className:"react-flow__nodes",style:gn,children:s.map(u=>b.jsx(wh,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:i},u))})}us.displayName="NodeRenderer";const xh=N.memo(us);function vh(e){return ee(N.useCallback(n=>{if(!e)return n.edges.map(r=>r.id);const o=[];if(n.width&&n.height)for(const r of n.edges){const i=n.nodeLookup.get(r.source),s=n.nodeLookup.get(r.target);i&&s&&hf({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&o.push(r.id)}return o},[e]),re)}const Sh=({color:e="none",strokeWidth:t=1})=>b.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),_h=({color:e="none",strokeWidth:t=1})=>b.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Rr={[Wt.Arrow]:Sh,[Wt.ArrowClosed]:_h};function Ch(e){const t=oe();return N.useMemo(()=>{var r,i;return Object.prototype.hasOwnProperty.call(Rr,e)?Rr[e]:((i=(r=t.getState()).onError)==null||i.call(r,"009",Ee.error009(e)),null)},[e])}const Eh=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:l="auto-start-reverse"})=>{const u=Ch(t);return u?b.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0",children:b.jsx(u,{color:n,strokeWidth:s})}):null},as=({defaultColor:e,rfId:t})=>{const n=ee(i=>i.edges),o=ee(i=>i.defaultEdgeOptions),r=N.useMemo(()=>_f(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return r.length?b.jsx("svg",{className:"react-flow__marker",children:b.jsx("defs",{children:r.map(i=>b.jsx(Eh,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};as.displayName="MarkerDefinitions";var Rh=N.memo(as);function cs({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:l=2,children:u,className:a,...d}){const[f,c]=N.useState({x:1,y:0,width:0,height:0}),g=ie(["react-flow__edge-textwrapper",a]),h=N.useRef(null);return N.useEffect(()=>{if(h.current){const p=h.current.getBBox();c({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:b.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...d,children:[r&&b.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),b.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:o,children:n}),u]})}cs.displayName="EdgeText";const Mh=N.memo(cs);function hn({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:a,style:d,markerEnd:f,markerStart:c,className:g,interactionWidth:h=20}){return b.jsxs(b.Fragment,{children:[b.jsx("path",{id:e,style:d,d:t,fill:"none",className:ie(["react-flow__edge-path",g]),markerEnd:f,markerStart:c}),h&&b.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&he(n)&&he(o)?b.jsx(Mh,{x:n,y:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:a}):null]})}function Mr({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===q.Left||e===q.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function ds({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:r,targetPosition:i=q.Top}){const[s,l]=Mr({pos:n,x1:e,y1:t,x2:o,y2:r}),[u,a]=Mr({pos:i,x1:o,y1:r,x2:e,y2:t}),[d,f,c,g]=Vi({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:a});return[`M${e},${t} C${s},${l} ${u},${a} ${o},${r}`,d,f,c,g]}function fs(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=q.Bottom,targetPosition:l=q.Top,label:u,labelStyle:a,labelShowBg:d,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:g,style:h,markerEnd:p,markerStart:v,interactionWidth:m})=>{const[S,y,x]=ds({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:l}),E=e.isInternal?void 0:t;return b.jsx(hn,{id:E,path:S,labelX:y,labelY:x,label:u,labelStyle:a,labelShowBg:d,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:g,style:h,markerEnd:p,markerStart:v,interactionWidth:m})})}const $h=fs({isInternal:!1}),gs=fs({isInternal:!0});$h.displayName="SimpleBezierEdge";gs.displayName="SimpleBezierEdgeInternal";function hs(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:f,style:c,sourcePosition:g=q.Bottom,targetPosition:h=q.Top,markerEnd:p,markerStart:v,pathOptions:m,interactionWidth:S})=>{const[y,x,E]=no({sourceX:n,sourceY:o,sourcePosition:g,targetX:r,targetY:i,targetPosition:h,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset}),F=e.isInternal?void 0:t;return b.jsx(hn,{id:F,path:y,labelX:x,labelY:E,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:f,style:c,markerEnd:p,markerStart:v,interactionWidth:S})})}const ps=hs({isInternal:!1}),ms=hs({isInternal:!0});ps.displayName="SmoothStepEdge";ms.displayName="SmoothStepEdgeInternal";function ws(e){return N.memo(({id:t,...n})=>{var r;const o=e.isInternal?void 0:t;return b.jsx(ps,{...n,id:o,pathOptions:N.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const Ih=ws({isInternal:!1}),ys=ws({isInternal:!0});Ih.displayName="StepEdge";ys.displayName="StepEdgeInternal";function xs(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:f,style:c,markerEnd:g,markerStart:h,interactionWidth:p})=>{const[v,m,S]=Hi({sourceX:n,sourceY:o,targetX:r,targetY:i}),y=e.isInternal?void 0:t;return b.jsx(hn,{id:y,path:v,labelX:m,labelY:S,label:s,labelStyle:l,labelShowBg:u,labelBgStyle:a,labelBgPadding:d,labelBgBorderRadius:f,style:c,markerEnd:g,markerStart:h,interactionWidth:p})})}const bh=xs({isInternal:!1}),vs=xs({isInternal:!0});bh.displayName="StraightEdge";vs.displayName="StraightEdgeInternal";function Ss(e){return N.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:s=q.Bottom,targetPosition:l=q.Top,label:u,labelStyle:a,labelShowBg:d,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:g,style:h,markerEnd:p,markerStart:v,pathOptions:m,interactionWidth:S})=>{const[y,x,E]=ki({sourceX:n,sourceY:o,sourcePosition:s,targetX:r,targetY:i,targetPosition:l,curvature:m==null?void 0:m.curvature}),F=e.isInternal?void 0:t;return b.jsx(hn,{id:F,path:y,labelX:x,labelY:E,label:u,labelStyle:a,labelShowBg:d,labelBgStyle:f,labelBgPadding:c,labelBgBorderRadius:g,style:h,markerEnd:p,markerStart:v,interactionWidth:S})})}const Nh=Ss({isInternal:!1}),_s=Ss({isInternal:!0});Nh.displayName="BezierEdge";_s.displayName="BezierEdgeInternal";const $r={default:_s,straight:vs,step:ys,smoothstep:ms,simplebezier:gs},Ir={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ph=(e,t,n)=>n===q.Left?e-t:n===q.Right?e+t:e,Ah=(e,t,n)=>n===q.Top?e-t:n===q.Bottom?e+t:e,br="react-flow__edgeupdater";function Nr({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:l}){return b.jsx("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:ie([br,`${br}-${l}`]),cx:Ph(t,o,e),cy:Ah(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Fh({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:s,sourcePosition:l,targetPosition:u,onReconnect:a,onReconnectStart:d,onReconnectEnd:f,setReconnecting:c,setUpdateHover:g}){const h=oe(),p=(x,E)=>{if(x.button!==0)return;const{autoPanOnConnect:F,domNode:$,isValidConnection:P,connectionMode:V,connectionRadius:A,lib:z,onConnectStart:H,onConnectEnd:k,cancelConnection:w,nodeLookup:M,rfId:_,panBy:I,updateConnection:C}=h.getState(),R=E.type==="target";c(!0),d==null||d(x,n,E.type);const D=(L,Y)=>{c(!1),f==null||f(L,n,E.type,Y)},T=L=>a==null?void 0:a(n,L);io.onPointerDown(x.nativeEvent,{autoPanOnConnect:F,connectionMode:V,connectionRadius:A,domNode:$,handleId:E.id,nodeId:E.nodeId,nodeLookup:M,isTarget:R,edgeUpdaterType:E.type,lib:z,flowId:_,cancelConnection:w,panBy:I,isValidConnection:P,onConnect:T,onConnectStart:H,onConnectEnd:k,onReconnectEnd:D,updateConnection:C,getTransform:()=>h.getState().transform,getFromHandle:()=>h.getState().connection.fromHandle})},v=x=>p(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),m=x=>p(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),S=()=>g(!0),y=()=>g(!1);return b.jsxs(b.Fragment,{children:[(e===!0||e==="source")&&b.jsx(Nr,{position:l,centerX:o,centerY:r,radius:t,onMouseDown:v,onMouseEnter:S,onMouseOut:y,type:"source"}),(e===!0||e==="target")&&b.jsx(Nr,{position:u,centerX:i,centerY:s,radius:t,onMouseDown:m,onMouseEnter:S,onMouseOut:y,type:"target"})]})}function Vh({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:s,onMouseEnter:l,onMouseMove:u,onMouseLeave:a,reconnectRadius:d,onReconnect:f,onReconnectStart:c,onReconnectEnd:g,rfId:h,edgeTypes:p,noPanClassName:v,onError:m,disableKeyboardA11y:S}){let y=ee(j=>j.edgeLookup.get(e));const x=ee(j=>j.defaultEdgeOptions);y=x?{...x,...y}:y;let E=y.type||"default",F=(p==null?void 0:p[E])||$r[E];F===void 0&&(m==null||m("011",Ee.error011(E)),E="default",F=$r.default);const $=!!(y.focusable||t&&typeof y.focusable>"u"),P=typeof f<"u"&&(y.reconnectable||n&&typeof y.reconnectable>"u"),V=!!(y.selectable||o&&typeof y.selectable>"u"),A=N.useRef(null),[z,H]=N.useState(!1),[k,w]=N.useState(!1),M=oe(),{zIndex:_,sourceX:I,sourceY:C,targetX:R,targetY:D,sourcePosition:T,targetPosition:L}=ee(N.useCallback(j=>{const te=j.nodeLookup.get(y.source),ne=j.nodeLookup.get(y.target);if(!te||!ne)return{zIndex:y.zIndex,...Ir};const de=Sf({id:e,sourceNode:te,targetNode:ne,sourceHandle:y.sourceHandle||null,targetHandle:y.targetHandle||null,connectionMode:j.connectionMode,onError:m});return{zIndex:gf({selected:y.selected,zIndex:y.zIndex,sourceNode:te,targetNode:ne,elevateOnSelect:j.elevateEdgesOnSelect}),...de||Ir}},[y.source,y.target,y.sourceHandle,y.targetHandle,y.selected,y.zIndex]),re),Y=N.useMemo(()=>y.markerStart?`url('#${oo(y.markerStart,h)}')`:void 0,[y.markerStart,h]),O=N.useMemo(()=>y.markerEnd?`url('#${oo(y.markerEnd,h)}')`:void 0,[y.markerEnd,h]);if(y.hidden||I===null||C===null||R===null||D===null)return null;const G=j=>{var Me;const{addSelectedEdges:te,unselectNodesAndEdges:ne,multiSelectionActive:de}=M.getState();V&&(M.setState({nodesSelectionActive:!1}),y.selected&&de?(ne({nodes:[],edges:[y]}),(Me=A.current)==null||Me.blur()):te([e])),r&&r(j,y)},X=i?j=>{i(j,{...y})}:void 0,K=s?j=>{s(j,{...y})}:void 0,B=l?j=>{l(j,{...y})}:void 0,Z=u?j=>{u(j,{...y})}:void 0,J=a?j=>{a(j,{...y})}:void 0,Q=j=>{var te;if(!S&&vi.includes(j.key)&&V){const{unselectNodesAndEdges:ne,addSelectedEdges:de}=M.getState();j.key==="Escape"?((te=A.current)==null||te.blur(),ne({edges:[y]})):de([e])}};return b.jsx("svg",{style:{zIndex:_},children:b.jsxs("g",{className:ie(["react-flow__edge",`react-flow__edge-${E}`,y.className,v,{selected:y.selected,animated:y.animated,inactive:!V&&!r,updating:z,selectable:V}]),onClick:G,onDoubleClick:X,onContextMenu:K,onMouseEnter:B,onMouseMove:Z,onMouseLeave:J,onKeyDown:$?Q:void 0,tabIndex:$?0:void 0,role:$?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":y.ariaLabel===null?void 0:y.ariaLabel||`Edge from ${y.source} to ${y.target}`,"aria-describedby":$?`${Ji}-${h}`:void 0,ref:A,children:[!k&&b.jsx(F,{id:e,source:y.source,target:y.target,type:y.type,selected:y.selected,animated:y.animated,selectable:V,deletable:y.deletable??!0,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,sourceX:I,sourceY:C,targetX:R,targetY:D,sourcePosition:T,targetPosition:L,data:y.data,style:y.style,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerStart:Y,markerEnd:O,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth}),P&&b.jsx(Fh,{edge:y,isReconnectable:P,reconnectRadius:d,onReconnect:f,onReconnectStart:c,onReconnectEnd:g,sourceX:I,sourceY:C,targetX:R,targetY:D,sourcePosition:T,targetPosition:L,setUpdateHover:H,setReconnecting:w})]})})}const kh=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Cs({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:a,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:c,onReconnectStart:g,onReconnectEnd:h,disableKeyboardA11y:p}){const{edgesFocusable:v,edgesReconnectable:m,elementsSelectable:S,onError:y}=ee(kh,re),x=vh(t);return b.jsxs("div",{className:"react-flow__edges",children:[b.jsx(Rh,{defaultColor:e,rfId:n}),x.map(E=>b.jsx(Vh,{id:E,edgesFocusable:v,edgesReconnectable:m,elementsSelectable:S,noPanClassName:r,onReconnect:i,onContextMenu:s,onMouseEnter:l,onMouseMove:u,onMouseLeave:a,onClick:d,reconnectRadius:f,onDoubleClick:c,onReconnectStart:g,onReconnectEnd:h,rfId:n,onError:y,edgeTypes:o,disableKeyboardA11y:p},E))]})}Cs.displayName="EdgeRenderer";const Dh=N.memo(Cs),Hh=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function zh({children:e}){const t=ee(Hh);return b.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Th(e){const t=Eo(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Lh=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Bh(e){const t=ee(Lh),n=oe();return N.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Oh(e){return e.connection.inProgress?{...e.connection,to:Et(e.connection.to,e.transform)}:{...e.connection}}function Gh(e){return Oh}function jh(e){const t=Gh();return ee(t,re)}const Xh=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Yh({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:r,width:i,height:s,isValid:l,inProgress:u}=ee(Xh,re);return!(i&&r&&u)?null:b.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:b.jsx("g",{className:ie(["react-flow__connection",_i(l)]),children:b.jsx(Es,{style:t,type:n,CustomComponent:o,isValid:l})})})}const Es=({style:e,type:t=Ne.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:i,fromNode:s,fromHandle:l,fromPosition:u,to:a,toNode:d,toHandle:f,toPosition:c}=jh();if(!r)return;if(n)return b.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:l,fromX:i.x,fromY:i.y,toX:a.x,toY:a.y,fromPosition:u,toPosition:c,connectionStatus:_i(o),toNode:d,toHandle:f});let g="";const h={sourceX:i.x,sourceY:i.y,sourcePosition:u,targetX:a.x,targetY:a.y,targetPosition:c};switch(t){case Ne.Bezier:[g]=ki(h);break;case Ne.SimpleBezier:[g]=ds(h);break;case Ne.Step:[g]=no({...h,borderRadius:0});break;case Ne.SmoothStep:[g]=no(h);break;default:[g]=Hi(h)}return b.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};Es.displayName="ConnectionLine";const qh={};function Pr(e=qh){N.useRef(e),oe(),N.useEffect(()=>{},[e])}function Wh(){oe(),N.useRef(!1),N.useEffect(()=>{},[])}function Rs({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:a,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:c,onSelectionEnd:g,connectionLineType:h,connectionLineStyle:p,connectionLineComponent:v,connectionLineContainerStyle:m,selectionKeyCode:S,selectionOnDrag:y,selectionMode:x,multiSelectionKeyCode:E,panActivationKeyCode:F,zoomActivationKeyCode:$,deleteKeyCode:P,onlyRenderVisibleElements:V,elementsSelectable:A,defaultViewport:z,translateExtent:H,minZoom:k,maxZoom:w,preventScrolling:M,defaultMarkerColor:_,zoomOnScroll:I,zoomOnPinch:C,panOnScroll:R,panOnScrollSpeed:D,panOnScrollMode:T,zoomOnDoubleClick:L,panOnDrag:Y,onPaneClick:O,onPaneMouseEnter:G,onPaneMouseMove:X,onPaneMouseLeave:K,onPaneScroll:B,onPaneContextMenu:Z,paneClickDistance:J,nodeClickDistance:Q,onEdgeContextMenu:j,onEdgeMouseEnter:te,onEdgeMouseMove:ne,onEdgeMouseLeave:de,reconnectRadius:Me,onReconnect:pn,onReconnectStart:mn,onReconnectEnd:wn,noDragClassName:Ze,noWheelClassName:yn,noPanClassName:Qe,disableKeyboardA11y:Je,nodeExtent:xn,rfId:et,viewport:tt,onViewportChange:Rt}){return Pr(e),Pr(t),Wh(),Th(n),Bh(tt),b.jsx(dh,{onPaneClick:O,onPaneMouseEnter:G,onPaneMouseMove:X,onPaneMouseLeave:K,onPaneContextMenu:Z,onPaneScroll:B,paneClickDistance:J,deleteKeyCode:P,selectionKeyCode:S,selectionOnDrag:y,selectionMode:x,onSelectionStart:c,onSelectionEnd:g,multiSelectionKeyCode:E,panActivationKeyCode:F,zoomActivationKeyCode:$,elementsSelectable:A,zoomOnScroll:I,zoomOnPinch:C,zoomOnDoubleClick:L,panOnScroll:R,panOnScrollSpeed:D,panOnScrollMode:T,panOnDrag:Y,defaultViewport:z,translateExtent:H,minZoom:k,maxZoom:w,onSelectionContextMenu:f,preventScrolling:M,noDragClassName:Ze,noWheelClassName:yn,noPanClassName:Qe,disableKeyboardA11y:Je,onViewportChange:Rt,isControlledViewport:!!tt,children:b.jsxs(zh,{children:[b.jsx(Dh,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:s,onReconnect:pn,onReconnectStart:mn,onReconnectEnd:wn,onlyRenderVisibleElements:V,onEdgeContextMenu:j,onEdgeMouseEnter:te,onEdgeMouseMove:ne,onEdgeMouseLeave:de,reconnectRadius:Me,defaultMarkerColor:_,noPanClassName:Qe,disableKeyboardA11y:Je,rfId:et}),b.jsx(Yh,{style:p,type:h,component:v,containerStyle:m}),b.jsx("div",{className:"react-flow__edgelabel-renderer"}),b.jsx(xh,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:a,onNodeContextMenu:d,nodeClickDistance:Q,onlyRenderVisibleElements:V,noPanClassName:Qe,noDragClassName:Ze,disableKeyboardA11y:Je,nodeExtent:xn,rfId:et}),b.jsx("div",{className:"react-flow__viewport-portal"})]})})}Rs.displayName="GraphView";const Uh=N.memo(Rs),Ar=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:l,nodeExtent:u}={})=>{const a=new Map,d=new Map,f=new Map,c=new Map,g=o??t??[],h=n??e??[],p=l??[0,0],v=u??pt;Ti(f,c,g),ro(h,a,d,{nodeOrigin:p,nodeExtent:v,elevateNodesOnSelect:!1});let m=[0,0,1];if(s&&r&&i){const S=Ct(a,{filter:F=>!!((F.width||F.initialWidth)&&(F.height||F.initialHeight))}),{x:y,y:x,zoom:E}=yo(S,r,i,.5,2,.1);m=[y,x,E]}return{rfId:"1",width:0,height:0,transform:m,nodes:h,nodeLookup:a,parentLookup:d,edges:g,edgeLookup:c,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:pt,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:p,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Si},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:df,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Kh=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:l,nodeExtent:u})=>gg((a,d)=>({...Ar({nodes:e,edges:t,width:r,height:i,fitView:s,nodeOrigin:l,nodeExtent:u,defaultNodes:n,defaultEdges:o}),setNodes:f=>{const{nodeLookup:c,parentLookup:g,nodeOrigin:h,elevateNodesOnSelect:p}=d();ro(f,c,g,{nodeOrigin:h,nodeExtent:u,elevateNodesOnSelect:p,checkEquality:!0}),a({nodes:f})},setEdges:f=>{const{connectionLookup:c,edgeLookup:g}=d();Ti(c,g,f),a({edges:f})},setDefaultNodesAndEdges:(f,c)=>{if(f){const{setNodes:g}=d();g(f),a({hasDefaultNodes:!0})}if(c){const{setEdges:g}=d();g(c),a({hasDefaultEdges:!0})}},updateNodeInternals:(f,c={triggerFitView:!0})=>{const{triggerNodeChanges:g,nodeLookup:h,parentLookup:p,fitViewOnInit:v,fitViewDone:m,fitViewOnInitOptions:S,domNode:y,nodeOrigin:x,nodeExtent:E,debug:F,fitViewSync:$}=d(),{changes:P,updatedInternals:V}=$f(f,h,p,y,x,E);if(V){if(Ef(h,p,{nodeOrigin:x,nodeExtent:E}),c.triggerFitView){let A=m;!m&&v&&(A=$({...S,nodes:S==null?void 0:S.nodes})),a({fitViewDone:A})}else a({});(P==null?void 0:P.length)>0&&(F&&console.log("React Flow: trigger node changes",P),g==null||g(P))}},updateNodePositions:(f,c=!1)=>{const g=[],h=[];for(const[p,v]of f){const m={id:p,type:"position",position:v.position,dragging:c};v!=null&&v.expandParent&&(v!=null&&v.parentId)&&m.position&&(g.push({id:p,parentId:v.parentId,rect:{...v.internals.positionAbsolute,width:v.measured.width,height:v.measured.height}}),m.position.x=Math.max(0,m.position.x),m.position.y=Math.max(0,m.position.y)),h.push(m)}if(g.length>0){const{nodeLookup:p,parentLookup:v,nodeOrigin:m}=d(),S=_o(g,p,v,m);h.push(...S)}d().triggerNodeChanges(h)},triggerNodeChanges:f=>{const{onNodesChange:c,setNodes:g,nodes:h,hasDefaultNodes:p,debug:v}=d();if(f!=null&&f.length){if(p){const m=Vg(f,h);g(m)}v&&console.log("React Flow: trigger node changes",f),c==null||c(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:c,setEdges:g,edges:h,hasDefaultEdges:p,debug:v}=d();if(f!=null&&f.length){if(p){const m=kg(f,h);g(m)}v&&console.log("React Flow: trigger edge changes",f),c==null||c(f)}},addSelectedNodes:f=>{const{multiSelectionActive:c,edgeLookup:g,nodeLookup:h,triggerNodeChanges:p,triggerEdgeChanges:v}=d();if(c){const m=f.map(S=>Ve(S,!0));p(m);return}p(Be(h,new Set([...f]),!0)),v(Be(g))},addSelectedEdges:f=>{const{multiSelectionActive:c,edgeLookup:g,nodeLookup:h,triggerNodeChanges:p,triggerEdgeChanges:v}=d();if(c){const m=f.map(S=>Ve(S,!0));v(m);return}v(Be(g,new Set([...f]))),p(Be(h,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:c}={})=>{const{edges:g,nodes:h,triggerNodeChanges:p,triggerEdgeChanges:v}=d(),m=f||h,S=c||g,y=m.map(E=>(E.selected=!1,Ve(E.id,!1))),x=S.map(E=>Ve(E.id,!1));p(y),v(x)},setMinZoom:f=>{const{panZoom:c,maxZoom:g}=d();c==null||c.setScaleExtent([f,g]),a({minZoom:f})},setMaxZoom:f=>{const{panZoom:c,minZoom:g}=d();c==null||c.setScaleExtent([g,f]),a({maxZoom:f})},setTranslateExtent:f=>{var c;(c=d().panZoom)==null||c.setTranslateExtent(f),a({translateExtent:f})},setPaneClickDistance:f=>{var c;(c=d().panZoom)==null||c.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:c,triggerNodeChanges:g,triggerEdgeChanges:h}=d(),p=c.reduce((m,S)=>S.selected?[...m,Ve(S.id,!1)]:m,[]),v=f.reduce((m,S)=>S.selected?[...m,Ve(S.id,!1)]:m,[]);g(p),h(v)},setNodeExtent:f=>{const{nodes:c,nodeLookup:g,parentLookup:h,nodeOrigin:p,elevateNodesOnSelect:v,nodeExtent:m}=d();f[0][0]===m[0][0]&&f[0][1]===m[0][1]&&f[1][0]===m[1][0]&&f[1][1]===m[1][1]||(ro(c,g,h,{nodeOrigin:p,nodeExtent:f,elevateNodesOnSelect:v,checkEquality:!1}),a({nodeExtent:f}))},panBy:f=>{const{transform:c,width:g,height:h,panZoom:p,translateExtent:v}=d();return If({delta:f,panZoom:p,transform:c,translateExtent:v,width:g,height:h})},fitView:f=>{const{panZoom:c,width:g,height:h,minZoom:p,maxZoom:v,nodeLookup:m}=d();if(!c)return Promise.resolve(!1);const S=Qn(m,f);return Jn({nodes:S,width:g,height:h,panZoom:c,minZoom:p,maxZoom:v},f)},fitViewSync:f=>{const{panZoom:c,width:g,height:h,minZoom:p,maxZoom:v,nodeLookup:m}=d();if(!c)return!1;const S=Qn(m,f);return Jn({nodes:S,width:g,height:h,panZoom:c,minZoom:p,maxZoom:v},f),S.size>0},cancelConnection:()=>{a({connection:{...Si}})},updateConnection:f=>{a({connection:f})},reset:()=>a({...Ar()})}),Object.is);function Zh({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,fitView:s,nodeOrigin:l,nodeExtent:u,children:a}){const[d]=N.useState(()=>Kh({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:s,nodeOrigin:l,nodeExtent:u}));return b.jsx(hg,{value:d,children:b.jsx(Tg,{children:a})})}function Qh({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:s,fitView:l,nodeOrigin:u,nodeExtent:a}){return N.useContext(fn)?b.jsx(b.Fragment,{children:e}):b.jsx(Zh,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:l,nodeOrigin:u,nodeExtent:a,children:e})}const Jh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ep({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:s,onNodeClick:l,onEdgeClick:u,onInit:a,onMove:d,onMoveStart:f,onMoveEnd:c,onConnect:g,onConnectStart:h,onConnectEnd:p,onClickConnectStart:v,onClickConnectEnd:m,onNodeMouseEnter:S,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:E,onNodeDoubleClick:F,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:V,onNodesDelete:A,onEdgesDelete:z,onDelete:H,onSelectionChange:k,onSelectionDragStart:w,onSelectionDrag:M,onSelectionDragStop:_,onSelectionContextMenu:I,onSelectionStart:C,onSelectionEnd:R,onBeforeDelete:D,connectionMode:T,connectionLineType:L=Ne.Bezier,connectionLineStyle:Y,connectionLineComponent:O,connectionLineContainerStyle:G,deleteKeyCode:X="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:B=!1,selectionMode:Z=mt.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:Q=Kt()?"Meta":"Control",zoomActivationKeyCode:j=Kt()?"Meta":"Control",snapToGrid:te,snapGrid:ne,onlyRenderVisibleElements:de=!1,selectNodesOnDrag:Me,nodesDraggable:pn,nodesConnectable:mn,nodesFocusable:wn,nodeOrigin:Ze=es,edgesFocusable:yn,edgesReconnectable:Qe,elementsSelectable:Je=!0,defaultViewport:xn=$g,minZoom:et=.5,maxZoom:tt=2,translateExtent:Rt=pt,preventScrolling:bs=!0,nodeExtent:vn,defaultMarkerColor:Ns="#b1b1b7",zoomOnScroll:Ps=!0,zoomOnPinch:As=!0,panOnScroll:Fs=!1,panOnScrollSpeed:Vs=.5,panOnScrollMode:ks=He.Free,zoomOnDoubleClick:Ds=!0,panOnDrag:Hs=!0,onPaneClick:zs,onPaneMouseEnter:Ts,onPaneMouseMove:Ls,onPaneMouseLeave:Bs,onPaneScroll:Os,onPaneContextMenu:Gs,paneClickDistance:Mo=0,nodeClickDistance:js=0,children:Xs,onReconnect:Ys,onReconnectStart:qs,onReconnectEnd:Ws,onEdgeContextMenu:Us,onEdgeDoubleClick:Ks,onEdgeMouseEnter:Zs,onEdgeMouseMove:Qs,onEdgeMouseLeave:Js,reconnectRadius:el=10,onNodesChange:tl,onEdgesChange:nl,noDragClassName:ol="nodrag",noWheelClassName:rl="nowheel",noPanClassName:$o="nopan",fitView:Io,fitViewOptions:il,connectOnClick:sl,attributionPosition:ll,proOptions:ul,defaultEdgeOptions:al,elevateNodesOnSelect:cl,elevateEdgesOnSelect:dl,disableKeyboardA11y:bo=!1,autoPanOnConnect:fl,autoPanOnNodeDrag:gl,autoPanSpeed:hl,connectionRadius:pl,isValidConnection:ml,onError:wl,style:yl,id:No,nodeDragThreshold:xl,viewport:vl,onViewportChange:Sl,width:_l,height:Cl,colorMode:El="light",debug:Rl,...Ml},$l){const Sn=No||"1",Il=Pg(El);return b.jsx("div",{...Ml,style:{...yl,...Jh},ref:$l,className:ie(["react-flow",r,Il]),"data-testid":"rf__wrapper",id:No,children:b.jsxs(Qh,{nodes:e,edges:t,width:_l,height:Cl,fitView:Io,nodeOrigin:Ze,nodeExtent:vn,children:[b.jsx(Uh,{onInit:a,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:S,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:E,onNodeDoubleClick:F,nodeTypes:i,edgeTypes:s,connectionLineType:L,connectionLineStyle:Y,connectionLineComponent:O,connectionLineContainerStyle:G,selectionKeyCode:K,selectionOnDrag:B,selectionMode:Z,deleteKeyCode:X,multiSelectionKeyCode:Q,panActivationKeyCode:J,zoomActivationKeyCode:j,onlyRenderVisibleElements:de,defaultViewport:xn,translateExtent:Rt,minZoom:et,maxZoom:tt,preventScrolling:bs,zoomOnScroll:Ps,zoomOnPinch:As,zoomOnDoubleClick:Ds,panOnScroll:Fs,panOnScrollSpeed:Vs,panOnScrollMode:ks,panOnDrag:Hs,onPaneClick:zs,onPaneMouseEnter:Ts,onPaneMouseMove:Ls,onPaneMouseLeave:Bs,onPaneScroll:Os,onPaneContextMenu:Gs,paneClickDistance:Mo,nodeClickDistance:js,onSelectionContextMenu:I,onSelectionStart:C,onSelectionEnd:R,onReconnect:Ys,onReconnectStart:qs,onReconnectEnd:Ws,onEdgeContextMenu:Us,onEdgeDoubleClick:Ks,onEdgeMouseEnter:Zs,onEdgeMouseMove:Qs,onEdgeMouseLeave:Js,reconnectRadius:el,defaultMarkerColor:Ns,noDragClassName:ol,noWheelClassName:rl,noPanClassName:$o,rfId:Sn,disableKeyboardA11y:bo,nodeExtent:vn,viewport:vl,onViewportChange:Sl}),b.jsx(Ng,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:g,onConnectStart:h,onConnectEnd:p,onClickConnectStart:v,onClickConnectEnd:m,nodesDraggable:pn,nodesConnectable:mn,nodesFocusable:wn,edgesFocusable:yn,edgesReconnectable:Qe,elementsSelectable:Je,elevateNodesOnSelect:cl,elevateEdgesOnSelect:dl,minZoom:et,maxZoom:tt,nodeExtent:vn,onNodesChange:tl,onEdgesChange:nl,snapToGrid:te,snapGrid:ne,connectionMode:T,translateExtent:Rt,connectOnClick:sl,defaultEdgeOptions:al,fitView:Io,fitViewOptions:il,onNodesDelete:A,onEdgesDelete:z,onDelete:H,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:V,onSelectionDrag:M,onSelectionDragStart:w,onSelectionDragStop:_,onMove:d,onMoveStart:f,onMoveEnd:c,noPanClassName:$o,nodeOrigin:Ze,rfId:Sn,autoPanOnConnect:fl,autoPanOnNodeDrag:gl,autoPanSpeed:hl,onError:wl,connectionRadius:pl,isValidConnection:ml,selectNodesOnDrag:Me,nodeDragThreshold:xl,onBeforeDelete:D,paneClickDistance:Mo,debug:Rl}),b.jsx(Mg,{onSelectionChange:k}),Xs,b.jsx(Sg,{proOptions:ul,position:ll}),b.jsx(xg,{rfId:Sn,disableKeyboardA11y:bo})]})})}var Np=ns(ep);function tp({dimensions:e,lineWidth:t,variant:n,className:o}){return b.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ie(["react-flow__background-pattern",n,o])})}function np({radius:e,className:t}){return b.jsx("circle",{cx:e,cy:e,r:e,className:ie(["react-flow__background-pattern","dots",t])})}var Ae;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ae||(Ae={}));const op={[Ae.Dots]:1,[Ae.Lines]:1,[Ae.Cross]:6},rp=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ms({id:e,variant:t=Ae.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:s,bgColor:l,style:u,className:a,patternClassName:d}){const f=N.useRef(null),{transform:c,patternId:g}=ee(rp,re),h=o||op[t],p=t===Ae.Dots,v=t===Ae.Cross,m=Array.isArray(n)?n:[n,n],S=[m[0]*c[2]||1,m[1]*c[2]||1],y=h*c[2],x=Array.isArray(i)?i:[i,i],E=v?[y,y]:S,F=[x[0]*c[2]||1+E[0]/2,x[1]*c[2]||1+E[1]/2],$=`${g}${e||""}`;return b.jsxs("svg",{className:ie(["react-flow__background",a]),style:{...u,...gn,"--xy-background-color-props":l,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[b.jsx("pattern",{id:$,x:c[0]%S[0],y:c[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`,children:p?b.jsx(np,{radius:y/2,className:d}):b.jsx(tp,{dimensions:E,lineWidth:r,variant:t,className:d})}),b.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${$})`})]})}Ms.displayName="Background";const Pp=N.memo(Ms);function ip(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:b.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function sp(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:b.jsx("path",{d:"M0 0h32v4.2H0z"})})}function lp(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:b.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function up(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:b.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ap(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:b.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ht({children:e,className:t,...n}){return b.jsx("button",{type:"button",className:ie(["react-flow__controls-button",t]),...n,children:e})}const cp=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function $s({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:l,onInteractiveChange:u,className:a,children:d,position:f="bottom-left",orientation:c="vertical","aria-label":g="React Flow controls"}){const h=oe(),{isInteractive:p,minZoomReached:v,maxZoomReached:m}=ee(cp,re),{zoomIn:S,zoomOut:y,fitView:x}=Eo(),E=()=>{S(),i==null||i()},F=()=>{y(),s==null||s()},$=()=>{x(r),l==null||l()},P=()=>{h.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),u==null||u(!p)},V=c==="horizontal"?"horizontal":"vertical";return b.jsxs(Co,{className:ie(["react-flow__controls",V,a]),position:f,style:e,"data-testid":"rf__controls","aria-label":g,children:[t&&b.jsxs(b.Fragment,{children:[b.jsx(Ht,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m,children:b.jsx(ip,{})}),b.jsx(Ht,{onClick:F,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:b.jsx(sp,{})})]}),n&&b.jsx(Ht,{className:"react-flow__controls-fitview",onClick:$,title:"fit view","aria-label":"fit view",children:b.jsx(lp,{})}),o&&b.jsx(Ht,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:p?b.jsx(ap,{}):b.jsx(up,{})}),d]})}$s.displayName="Controls";const Ap=N.memo($s);function dp({id:e,x:t,y:n,width:o,height:r,style:i,color:s,strokeColor:l,strokeWidth:u,className:a,borderRadius:d,shapeRendering:f,selected:c,onClick:g}){const{background:h,backgroundColor:p}=i||{},v=s||h||p;return b.jsx("rect",{className:ie(["react-flow__minimap-node",{selected:c},a]),x:t,y:n,rx:d,ry:d,width:o,height:r,style:{fill:v,stroke:l,strokeWidth:u},shapeRendering:f,onClick:g?m=>g(m,e):void 0})}const fp=N.memo(dp),gp=e=>e.nodes.map(t=>t.id),zn=e=>e instanceof Function?e:()=>e;function hp({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=fp,onClick:s}){const l=ee(gp,re),u=zn(t),a=zn(e),d=zn(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return b.jsx(b.Fragment,{children:l.map(c=>b.jsx(mp,{id:c,nodeColorFunc:u,nodeStrokeColorFunc:a,nodeClassNameFunc:d,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:s,shapeRendering:f},c))})}function pp({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:l,onClick:u}){const{node:a,x:d,y:f,width:c,height:g}=ee(h=>{const p=h.nodeLookup.get(e),{x:v,y:m}=p.internals.positionAbsolute,{width:S,height:y}=Re(p);return{node:p,x:v,y:m,width:S,height:y}},re);return!a||a.hidden||!Ni(a)?null:b.jsx(l,{x:d,y:f,width:c,height:g,style:a.style,selected:!!a.selected,className:o(a),color:t(a),borderRadius:r,strokeColor:n(a),strokeWidth:i,shapeRendering:s,onClick:u,id:a.id})}const mp=N.memo(pp);var wp=N.memo(hp);const yp=200,xp=150,vp=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Ii(Ct(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Sp="react-flow__minimap-desc";function Is({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:l,bgColor:u,maskColor:a,maskStrokeColor:d,maskStrokeWidth:f,position:c="bottom-right",onClick:g,onNodeClick:h,pannable:p=!1,zoomable:v=!1,ariaLabel:m="React Flow mini map",inversePan:S,zoomStep:y=10,offsetScale:x=5}){const E=oe(),F=N.useRef(null),{boundingRect:$,viewBB:P,rfId:V,panZoom:A,translateExtent:z,flowWidth:H,flowHeight:k}=ee(vp,re),w=(e==null?void 0:e.width)??yp,M=(e==null?void 0:e.height)??xp,_=$.width/w,I=$.height/M,C=Math.max(_,I),R=C*w,D=C*M,T=x*C,L=$.x-(R-$.width)/2-T,Y=$.y-(D-$.height)/2-T,O=R+T*2,G=D+T*2,X=`${Sp}-${V}`,K=N.useRef(0),B=N.useRef();K.current=C,N.useEffect(()=>{if(F.current&&A)return B.current=Df({domNode:F.current,panZoom:A,getTransform:()=>E.getState().transform,getViewScale:()=>K.current}),()=>{var Q;(Q=B.current)==null||Q.destroy()}},[A]),N.useEffect(()=>{var Q;(Q=B.current)==null||Q.update({translateExtent:z,width:H,height:k,inversePan:S,pannable:p,zoomStep:y,zoomable:v})},[p,v,S,y,z,H,k]);const Z=g?Q=>{var ne;const[j,te]=((ne=B.current)==null?void 0:ne.pointer(Q))||[0,0];g(Q,{x:j,y:te})}:void 0,J=h?N.useCallback((Q,j)=>{const te=E.getState().nodeLookup.get(j);h(Q,te)},[]):void 0;return b.jsx(Co,{position:c,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*C:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:ie(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:b.jsxs("svg",{width:w,height:M,viewBox:`${L} ${Y} ${O} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":X,ref:F,onClick:Z,children:[m&&b.jsx("title",{id:X,children:m}),b.jsx(wp,{onClick:J,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:l}),b.jsx("path",{className:"react-flow__minimap-mask",d:`M${L-T},${Y-T}h${O+T*2}v${G+T*2}h${-O-T*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Is.displayName="MiniMap";N.memo(Is);function _p({nodeId:e,position:t,variant:n=at.Handle,className:o,style:r={},children:i,color:s,minWidth:l=10,minHeight:u=10,maxWidth:a=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:c,onResizeStart:g,onResize:h,onResizeEnd:p}){const v=ss(),m=typeof e=="string"?e:v,S=oe(),y=N.useRef(null),x=n===at.Line?"right":"bottom-right",E=t??x,F=N.useRef(null);N.useEffect(()=>{if(!(!y.current||!m))return F.current||(F.current=Zf({domNode:y.current,nodeId:m,getStoreItems:()=>{const{nodeLookup:A,transform:z,snapGrid:H,snapToGrid:k,nodeOrigin:w}=S.getState();return{nodeLookup:A,transform:z,snapGrid:H,snapToGrid:k,nodeOrigin:w}},onChange:(A,z)=>{const{triggerNodeChanges:H,nodeLookup:k,parentLookup:w,nodeOrigin:M}=S.getState(),_=[],I={x:A.x,y:A.y},C=k.get(m);if(C&&C.expandParent&&C.parentId){const R=C.origin??M,D=A.width??C.measured.width,T=A.height??C.measured.height,L={id:C.id,parentId:C.parentId,rect:{width:D,height:T,...Pi({x:A.x??C.position.x,y:A.y??C.position.y},{width:D,height:T},C.parentId,k,R)}},Y=_o([L],k,w,M);_.push(...Y),I.x=A.x?Math.max(R[0]*D,A.x):void 0,I.y=A.y?Math.max(R[1]*T,A.y):void 0}if(I.x!==void 0&&I.y!==void 0){const R={id:m,type:"position",position:{...I}};_.push(R)}if(A.width!==void 0&&A.height!==void 0){const R={id:m,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:A.width,height:A.height}};_.push(R)}for(const R of z){const D={...R,type:"position"};_.push(D)}H(_)},onEnd:()=>{const A={id:m,type:"dimensions",resizing:!1};S.getState().triggerNodeChanges([A])}})),F.current.update({controlPosition:E,boundaries:{minWidth:l,minHeight:u,maxWidth:a,maxHeight:d},keepAspectRatio:f,onResizeStart:g,onResize:h,onResizeEnd:p,shouldResize:c}),()=>{var A;(A=F.current)==null||A.destroy()}},[E,l,u,a,d,f,g,h,p,c]);const $=E.split("-"),P=n===at.Line?"borderColor":"backgroundColor",V=s?{...r,[P]:s}:r;return b.jsx("div",{className:ie(["react-flow__resize-control","nodrag",...$,n,o]),ref:y,style:V,children:i})}N.memo(_p);export{Pp as B,Ne as C,Zt as H,q as P,Zh as R,Mp as a,$p as b,ki as c,wf as d,Vg as e,Ip as f,Rp as g,kg as h,Np as i,Ap as j,Ae as k,Co as l,Ll as s,bp as u};
